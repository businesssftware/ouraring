(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8450],{9055:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});var r=n(95155),a=n(12115),i=n(73176);let s=(0,a.createContext)(null),o=e=>{let{children:t}=e,n=(0,i.C2)({enabled:!0,includeInventory:!0});return(0,r.jsx)(s.Provider,{value:n,children:t})}},12132:(e,t,n)=>{"use strict";n.d(t,{default:()=>l});var r=n(95155),a=n(55495),i=n(87397),s=n(27177),o=n(19997);let c=()=>{let e=(0,o.Ri)(s.JL);e&&(0,o.TV)(s.JL,e,8760)},l=e=>{let{locale:t}=e,{NEXT_PUBLIC_SEGMENT_KEY:n}=(0,i.useEnvContext)(),s="true"!==(0,o.Ri)("disable-segment");return n&&(0,r.jsx)(a.F,{intlProps:{locale:t},segmentKey:n,isEnabled:s,onAcceptAll:()=>{c()},onSetPreferences:e=>{let{marketing:t}=e;t&&c()}})}},12848:(e,t,n)=>{"use strict";n.d(t,{O:()=>o,default:()=>c});var r=n(95155),a=n(46391),i=n(12115);let s=(0,i.createContext)({isDecagonScriptLoaded:!1,isChatbotEnabled:!1,onScriptLoaded:()=>{}}),o=()=>(0,i.useContext)(s),c=e=>{let{children:t}=e,[n,o]=(0,i.useState)(!1),c=(0,a.useExperiment)("ai_chatbot").get("enableChatbot",!1),l=(0,i.useCallback)(()=>{o(!0)},[]),u=(0,i.useMemo)(()=>({isDecagonScriptLoaded:n,isChatbotEnabled:c,onScriptLoaded:l}),[n,c,l]);return(0,r.jsx)(s.Provider,{value:u,children:t})}},14750:(e,t,n)=>{"use strict";n.d(t,{default:()=>u});var r=n(62105),a=n(70654),i=n(57832),s=n(52767),o=n(13473),c=n(87397),l=n(57509);let u=()=>{let{NEXT_PUBLIC_SENTRY_DSN:e,NEXT_PUBLIC_OURA_ENV:t,NEXT_PUBLIC_VERSION:n}=(0,c.useEnvContext)();return(0,l.A)()&&!r.Dp()&&a.Ts({dsn:e,environment:t,tracesSampleRate:.2,release:n,integrations:[i.f(),s.c(),o.q({levels:["error","assert"]})]}),null}},21193:(e,t,n)=>{Promise.resolve().then(n.bind(n,46096)),Promise.resolve().then(n.bind(n,58972)),Promise.resolve().then(n.bind(n,36142)),Promise.resolve().then(n.t.bind(n,69243,23)),Promise.resolve().then(n.t.bind(n,32827,23)),Promise.resolve().then(n.t.bind(n,15161,23)),Promise.resolve().then(n.bind(n,37028)),Promise.resolve().then(n.bind(n,1608)),Promise.resolve().then(n.bind(n,76473)),Promise.resolve().then(n.bind(n,14750)),Promise.resolve().then(n.bind(n,99599)),Promise.resolve().then(n.bind(n,12848)),Promise.resolve().then(n.bind(n,77536)),Promise.resolve().then(n.bind(n,80737)),Promise.resolve().then(n.bind(n,5221)),Promise.resolve().then(n.bind(n,56740)),Promise.resolve().then(n.bind(n,12132)),Promise.resolve().then(n.bind(n,9055)),Promise.resolve().then(n.bind(n,30758)),Promise.resolve().then(n.bind(n,23838)),Promise.resolve().then(n.bind(n,91697)),Promise.resolve().then(n.bind(n,79420)),Promise.resolve().then(n.bind(n,74621)),Promise.resolve().then(n.t.bind(n,26039,23))},23838:(e,t,n)=>{"use strict";n.d(t,{default:()=>c});var r=n(95155),a=n(5278),i=n(46391),s=n(87397),o=n(1728);function c(e){var t;let{user:n,data:c,children:l,optionOverrides:u}=e,{NEXT_PUBLIC_STATSIG_CLIENT_KEY:d,NEXT_PUBLIC_OURA_ENV:f}=(0,s.useEnvContext)();if(!d)throw Error("Missing NEXT_PUBLIC_STATSIG_CLIENT_KEY environment variable.");if(!f)throw Error("Missing NEXT_PUBLIC_OURA_ENV environment variable.");(null==(t=n.customIDs)?void 0:t.stableID)||(0,o.A)({level:"warn",message:"Missing stable id in StatisProviderWrapper",module:"statsig"});let h={environment:{tier:"".concat(f)},networkConfig:{preventAllNetworkTraffic:!1},customUserCacheKeyFunc:(e,t)=>{var n;return(null==(n=t.customIDs)?void 0:n.stableID)?"sdkKey:".concat(e,":stableID:").concat(t.customIDs.stableID):((0,o.A)({level:"warn",message:"Missing stable id in StatisProviderWrapper",module:"statsig"}),"sdkKey:".concat(e))},..."production"!==f&&{overrideAdapter:new a.LocalOverrideAdapter(d)},...u},y=(0,i.useClientBootstrapInit)(d,n,null!=c?c:"{}",h);return(0,r.jsx)(i.StatsigProvider,{client:y,children:l})}},26039:()=>{},30758:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});var r=n(95155),a=n(26715),i=n(65363);let s=e=>{let{children:t}=e,n=(0,i.SX)();return(0,r.jsx)(a.QueryClientProvider,{client:n,children:t})}},37028:(e,t,n)=>{"use strict";n.r(t),n.d(t,{OuraAnalytics:()=>f});var r,a=n(4527),i=n(86642),s=n(80613),o=n(1728);let c=a.A.bind([i.A,s.A])("",{mode:"cors"}).errorType("json").resolve(e=>e.json()).catcherFallback(e=>{(0,o.A)({error:e,message:"Uncaught Next Backend Client error",module:"app"})});var l=n(19997),u=n(57509),d=n(87358);class f{async track(e,t,n){let[r,a]=this.getAnalyticsFn(window.analytics.track,this.serverTrack);this.debugAnalyticsEvent("Sending ".concat(r," analytics track"),e,t,n);let i=this.enhanceProperties(t),s=this.enhanceContext(n);await this.callAnalyticsFn("track",()=>a(e,i,{...n,context:s}))}async page(e,t,n){let[r,a]=this.getAnalyticsFn(window.analytics.page,this.serverPage);this.debugAnalyticsEvent("Sending ".concat(r," analytics page"),e,t,n);let i=this.enhanceProperties({...t,name:e}),s=this.enhanceContext(n);await this.callAnalyticsFn("page",()=>a(e,i,s))}async identify(e,t){let[n,r]=this.getAnalyticsFn(window.analytics.identify,this.serverIdentify);this.debugAnalyticsEvent("Sending ".concat(n," analytics identify"),e,t);let a=this.enhanceContext(t);await this.callAnalyticsFn("identify",async()=>r(e,a))}gtmEvent(e){var t;null==(t=window.dataLayer)||t.push(e)}debugAnalyticsEvent(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];"true"===d.env.DEBUG_ANALYTICS&&console.log(...t)}constructor({serverBasePath:e="/api/analytics",statsigStableId:t=(0,l.Ri)("statsigStableId")}={}){this.getAnalyticsFn=(e,t)=>{let n=!!(0,u.A)()&&(()=>{var e;let t=(0,l.Ri)("tracking-preferences");return!!t&&!!(null==(e=(e=>{try{return JSON.parse(decodeURIComponent(e))}catch(e){return{}}})(t).custom)?void 0:e.marketing)})();return[n?"client":"server",n?e:t]},this.enhanceProperties=e=>this.withFacebookPixelCookies(this.withRedditProperties(this.withStatisgIds(this.withPageInfo(e)))),this.enhanceContext=e=>{let t=(0,l.Ri)("NEXT_LOCALE");return{page:this.withPageInfo(),locale:null!=t?t:"en",...e}},this.callAnalyticsFn=async(e,t)=>Promise.resolve(t()).catch(t=>{this.debugAnalyticsEvent("Error sending ".concat(e," event"),t)}),this.serverTrack=(e,t,n)=>c.url(this.serverBasePath+"/track").post({event:e,properties:t,context:null==n?void 0:n.context}),this.serverIdentify=(e,t)=>c.url(this.serverBasePath+"/identify").post({traits:e,context:t}),this.serverPage=(e,t,n)=>c.url(this.serverBasePath+"/page").post({name:e,properties:t,context:n}),this.withStatisgIds=e=>this.statsigStableId?{...e,statsigCustomIDs:["stableID",this.statsigStableId],statsigStableId:this.statsigStableId}:e,this.withFacebookPixelCookies=e=>{let t=(0,l.Ri)("_fbc"),n=(0,l.Ri)("_fbp");return{...e,...t&&{fbc:t},...n&&{fbp:n}}},this.withRedditProperties=e=>{let t=(0,l.Ri)("_rdt_uuid"),n=(e=>{let t=(0,l.Ri)("_rdt_cid"),n=new URLSearchParams(new URL(e).search).get("rdt_cid");return n||t})(document.location.href);return{...e,...t&&{rdt_uuid:t},...n&&{rdt_cid:n}}},this.withPageInfo=e=>({path:document.location.pathname,referrer:document.referrer,title:document.title,url:document.location.href,search:document.location.search,...e}),this.serverBasePath=e,this.statsigStableId=t}}(0,u.A)()&&(window.ouraAnalytics=null!=(r=window.ouraAnalytics)?r:new f)},56740:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(95155),a=n(56787);let i=e=>{let{children:t}=e;return(0,r.jsx)(a.x,{reducedMotion:"user",children:t})}},73176:(e,t,n)=>{"use strict";n.d(t,{C2:()=>g,D6:()=>y,_l:()=>v,pF:()=>m});var r=n(31274),a=n(95838),i=n(28151),s=n(12115),o=n(84477),c=n(57480),l=n(68174);function u(){let e=(0,r._)(["\n  query Products(\n    $cartId: String\n    $region: String\n    $currency: String\n    $flags: [String]\n    $productType: String\n    $includeInventory: Boolean\n  ) {\n    content(region: $region, currency: $currency, enabledFeatureFlags: $flags) {\n      listProducts(productType: $productType) {\n        id\n        productKey\n        title\n        handle\n        product_type\n        analytics_category\n        checkoutDescription\n        colorMsgKey\n        styleMsgKey\n        titleMsgKey\n        price {\n          amount\n          currencyCode\n        }\n        oldPrice {\n          amount\n          currencyCode\n        }\n        comparePrice {\n          amount\n          currencyCode\n        }\n        discountedPrice(cartId: $cartId) {\n          originalPrice {\n            amount\n            currencyCode\n          }\n          discountedPrice {\n            amount\n            currencyCode\n          }\n        }\n        selectedTraits {\n          name\n          value\n        }\n        inStock\n        isRing\n        seoParams {\n          title\n          description\n        }\n        options {\n          name\n          value\n        }\n        images {\n          originalSrc\n          thumbnailSrc\n          alt\n          fullBleedThumbnail\n        }\n        lineItemImage {\n          originalSrc\n          alt\n        }\n        variants(includeInventory: $includeInventory) {\n          sku\n          skuCode\n          id: variantId\n          variantId\n          productId\n          bbySkuId\n          selectedOptions {\n            name\n            value\n          }\n          inventory {\n            myAccount\n            retail\n          }\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}let d=(0,i.J1)(u()),f={cartId:null,region:null,currency:null,flags:[],productType:null,includeInventory:!1};function h(e){var t;let n=(0,l.S$)(),r={...f,...e,cartId:n};return{queryKey:["useProductsData",null!=(t=r.productType)?t:"All",{vars:r}],queryFn:async()=>{var e,t;return(null!=(t=null==(e=(await (0,o.A)(d,r)).content)?void 0:e.listProducts)?t:[]).filter(e=>null!==e).map(e=>{var t;let n=(null!=(t=e.variants)?t:[]).filter(e=>null!==e).map(t=>{var n;return{...t,id:Number(t.id),variantId:Number(t.variantId),productId:Number(t.productId),price:null==(n=e.price)?void 0:n.amount}});return{...e,id:Number(e.id),variants:n}})}}}function y(){let e=(0,c.A)();return(0,a.useQuery)({...h({currency:e.currencyCode,productType:"Accessory"}),select:(0,s.useCallback)(e=>({annual:e.find(e=>"one-year-membership"===e.handle),monthly:e.find(e=>"subscription"===e.handle)}),[])})}function v(){let e=(0,c.A)();return(0,a.useQuery)({...h({currency:e.currencyCode,productType:"Accessory"}),select:(0,s.useCallback)(e=>({oneYearMembership:e.find(e=>"one-year-membership"===e.handle),twoYearWarranty:e.find(e=>"extended-warranty-2year"===e.handle),threeYearWarranty:e.find(e=>"extended-warranty-3year"===e.handle)}),[])})}function g(e){let{enabled:t,includeInventory:n=!1}=e,r=(0,c.A)();return(0,a.useQuery)({...h({currency:r.currencyCode,includeInventory:n}),enabled:t})}function m(e){let{handle:t,includeInventory:n=!1}=e,r=(0,c.A)();return(0,a.useQuery)({...h({currency:r.currencyCode,includeInventory:n}),select:e=>{let n=e.reduce((e,t)=>({...e,[t.handle]:t}),{});if(!n[t])throw Error("Product not found for supplied handle.");return n[t]}})}},74621:(e,t,n)=>{"use strict";n.d(t,{default:()=>y});var r=n(95155),a=n(63554),i=n(1728),s=n(87358);let o=()=>{let e=s.env.NEXT_PUBLIC_OURA_ENV;return"sandbox"===e||"staging"===e||"production"===e?(0,r.jsx)(a.default,{id:"noibu-script",src:"https://cdn.noibu.com/collect-core.js",strategy:"beforeInteractive",onError:e=>{(0,i.A)({error:e,message:"Noibu script failed to load",module:"app"})}}):(0,r.jsx)(r.Fragment,{})},c=()=>(0,r.jsx)(a.default,{async:!0,src:"https://ouraringconfig.com/sdk/9.min.js",strategy:"afterInteractive"});var l=n(87397);let u=()=>{let{NEXT_PUBLIC_AFFIRM_KEY:e,NEXT_PUBLIC_AFFIRM_JS_LIBRARY:t}=(0,l.useEnvContext)();return(0,r.jsx)(a.default,{async:!0,id:"affirm-js",dangerouslySetInnerHTML:{__html:' _affirm_config = {\n                 public_api_key: "'.concat(e,'",\n                 script:"').concat(t,'"\n               };\n              (function(m,g,n,d,a,e,h,c){var b=m[n]||{},k=document.createElement(e),p=document.getElementsByTagName(e)[0],l=function(a,b,c){return function(){a[b]._.push([c,arguments])}};b[d]=l(b,d,"set");var f=b[d];b[a]={};b[a]._=[];f._=[];b._=[];b[a][h]=l(b,a,h);b[c]=function(){b._.push([h,arguments])};a=0;for(c="set add save post open empty reset on off trigger ready setProduct".split(" ");a<c.length;a++)f[c[a]]=l(b,d,c[a]);a=0;for(c=["get","token","url","items"];a<c.length;a++)f[c[a]]=function(){};k.async=\n              !0;k.src=g[e];p.parentNode.insertBefore(k,p);delete g[e];f(g);m[n]=b})(window,_affirm_config,"affirm","checkout","ui","script","ready","jsReady");').replace(/\s+/g," ").trim()},strategy:"beforeInteractive"})};var d=n(12848);let f=()=>{let{onScriptLoaded:e}=(0,d.O)();return(0,r.jsx)(a.default,{async:!0,id:"decagon-script","data-cy":"decagon-script",src:"https://decagon.ai/loaders/oura_embed.js",onLoad:()=>{e()},onError:e=>{console.error("Decagon script failed to load",e)}})},h=()=>(0,r.jsx)(a.default,{id:"segment-analytics",dangerouslySetInnerHTML:{__html:'!function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware"];analytics.factory=function(t){return function(){var     e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t,e){var n=document.createElement("script");n.type="text/javascript";n.async=!0;n.src="https://cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a);analytics._loadOptions=e};analytics.SNIPPET_VERSION="4.1.0";}}();'},strategy:"beforeInteractive"}),y=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h,{}),(0,r.jsx)(c,{}),(0,r.jsx)(u,{}),(0,r.jsx)(o,{}),(0,r.jsx)(f,{})]})},76473:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});var r=n(42626),a=n(12115),i=n(41208);let s=(e,t,n)=>{document.querySelectorAll('a[href^="/"]').forEach(r=>{let a=r.getAttribute("href");a&&a===t&&r.setAttribute("href","".concat(n,"/").concat(e).concat(a))})},o=()=>{let e=(0,r.Ym)(),t=(0,i.z)("NEXT_PUBLIC_ROOT_URL");return(0,a.useEffect)(()=>{s(e,"/my-account",t)},[e,t]),(0,a.useEffect)(()=>{s(e,"/cart",t)},[e,t]),null}},77536:(e,t,n)=>{"use strict";n.d(t,{default:()=>v,Y:()=>y});var r=n(95155),a=n(12115),i=n(31274),s=n(95838),o=n(87358);let c={};if(o.env.LOCAL_ENABLE_FEATURE_FLAG)for(let e of o.env.LOCAL_ENABLE_FEATURE_FLAG.split(","))console.log("Enabling feature flag ".concat(e," (from environment variable)")),c[e]=!0;if(o.env.LOCAL_DISABLE_FEATURE_FLAG)for(let e of o.env.LOCAL_DISABLE_FEATURE_FLAG.split(","))console.log("Disabling feature flag ".concat(e," (from environment variable)")),c[e]=!1;var l=n(28151),u=n(84477);function d(){let e=(0,i._)(["\n  query FeaturesConfig {\n    content {\n      flags: enabledFeatureFlags {\n        featureFlagKey\n        enabled\n      }\n    }\n  }\n"]);return d=function(){return e},e}for(let[e,t]of Object.entries(c))console.log("Using preset feature flag: ".concat(e," = ").concat(t));let f=(0,l.J1)(d()),h=(0,a.createContext)(null),y=()=>{let e=(0,a.useContext)(h);if(!e)throw Error("Did you forget to include FeatureFlagsProvider in your tree?");return e},v=e=>{let{children:t}=e,{data:n,isLoading:a,isSuccess:i}=(0,s.useQuery)({queryKey:["featuresConfig"],queryFn:async()=>{var e;let t=await (0,u.A)(f),n={};if(null==(e=t.content)?void 0:e.flags)for(let e of t.content.flags)e&&(n[e.featureFlagKey]=e.enabled);return n}});return(0,r.jsx)(h.Provider,{value:{data:n,isLoading:a,isSuccess:i},children:t})}},79420:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(87397),a=n(47650);let i=()=>{let e=(0,r.env)("NEXT_PUBLIC_IMGIX_HEALTH_DOMAIN"),t=(0,r.env)("NEXT_PUBLIC_ECOM_API_ENDPOINT");return e&&(0,a.prefetchDNS)("https://"+e),t&&(0,a.prefetchDNS)(t),(0,a.prefetchDNS)("https://cdn.segment.com"),(0,a.prefetchDNS)("https://prodregistryv2.org"),null}},80737:(e,t,n)=>{"use strict";n.d(t,{default:()=>c});var r=n(95155),a=n(35695),i=n(12115),s=n(96926);let o=(0,i.createContext)(null),c=e=>{let{children:t}=e,[n,c]=(0,i.useState)({}),d=(0,a.usePathname)();(0,i.useEffect)(()=>{var e;if(!d)return;let t=null!=(e=u()[d])?e:0;c(function(e,t){let n=u();return n[e]=t,(0,s.aM)(l,JSON.stringify(n)),u()}(d,t+1))},[d]);let f=(0,i.useMemo)(()=>({pathVisits:n}),[n]);return(0,r.jsx)(o.Provider,{value:f,children:t})},l="path_visits";function u(){let e=(0,s.C8)(l);return e?JSON.parse(e):{}}},91697:(e,t,n)=>{"use strict";n.d(t,{default:()=>u});var r=n(95155),a=n(5027),i=n(66766),s=n(6874),o=n.n(s),c=n(17652),l=n(57480);let u=function(e){var t;let{children:n,locale:s}=e,{countryData:u,currencyCode:d}=(0,l.A)(),f=(0,c.c3)();return(0,r.jsx)(a.ccV,{ImageComponent:i.default,LinkComponent:o(),currencyProps:{country:null!=(t=null==u?void 0:u.countryCode)?t:"US",fallbackCurrencyCode:d,fallbackLocale:s,freeMessage:f("cart_free"),locale:s},intlProps:{locale:s},children:n})}},96707:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(30535),a=n(41208);let i={auto:"format",fit:"max",fm:"png"},s=e=>{let{src:t,quality:n=70,width:s}=e,o=new r.A({domain:(0,a.z)("NEXT_PUBLIC_IMGIX_HEALTH_DOMAIN"),secureURLToken:(0,a.z)("NEXT_PUBLIC_IMGIX_HEALTH_URL_TOKEN")}),[c,l]=t.split("?"),u=Object.fromEntries(new URLSearchParams(l));if(!c)throw Error("Missing path in src");return o.buildURL(c,{...i,...u,q:n.toString(),w:s.toString()})}},96926:(e,t,n)=>{"use strict";n.d(t,{C8:()=>i,aM:()=>a,sN:()=>s});var r=n(57509);let a=(e,t)=>{if((0,r.A)())try{window.sessionStorage.setItem(e,t)}catch(e){}},i=e=>{if((0,r.A)())try{return window.sessionStorage.getItem(e)}catch(e){}return null},s=e=>{if((0,r.A)())try{window.sessionStorage.removeItem(e)}catch(e){}}}},e=>{e.O(0,[8069,4526,370,7397,5445,2626,2159,6963,3563,6124,3386,3453,7206,2105,7854,6654,8441,5964,7358],()=>e(e.s=21193)),_N_E=e.O()}]);
//# sourceMappingURL=layout-062512e7044c47cd.js.map