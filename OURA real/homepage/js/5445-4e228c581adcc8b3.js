"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5445],{22660:(e,t,n)=>{n.d(t,{$b:()=>r.$b,jL:()=>o,l6:()=>i,rj:()=>r.rj});var r=n(52430),o=class{id;logger;enabled;consoleDebug;constructor(e){this.id=e.id??Date.now().toString()+Math.random().toString(),this.logger=e.logger,this.enabled=e.enabled??!0,this.consoleDebug=e.consoleDebug??!1}_sendToLogger(e){if(!this.enabled)return;let t=this.shipToLogger(e);if(this.consoleDebug)switch(e.logLevel){case r.$b.info:console.info(...t);break;case r.$b.warn:console.warn(...t);break;case r.$b.error:console.error(...t);break;case r.$b.trace:case r.$b.debug:case r.$b.fatal:console.debug(...t);break;default:console.log(...t)}}getLoggerInstance(){return this.logger}},i=class{id;enabled;level;consoleDebug;constructor(e){this.id=Date.now().toString()+Math.random().toString(),this.enabled=e.enabled??!0,this.consoleDebug=e.consoleDebug??!1,this.level=e.level??"trace"}_sendToLogger(e){if(!this.enabled||r.rj[e.logLevel]<r.rj[this.level])return;let t=this.shipToLogger(e);if(this.consoleDebug)switch(e.logLevel){case r.$b.info:console.info(...t);break;case r.$b.warn:console.warn(...t);break;case r.$b.error:console.error(...t);break;case r.$b.trace:case r.$b.debug:case r.$b.fatal:console.debug(...t);break;default:console.log(...t)}}getLoggerInstance(){throw Error("This transport does not have a logger instance")}}},24162:(e,t,n)=>{n.d(t,{P5:()=>s});let r=new Map([Error,EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,AggregateError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(e=>[e.name,e])),o=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1},{property:"errors",enumerable:!1}],i=new WeakSet,a=({from:e,seen:t,to:n,forceEnumerable:s,maxDepth:c,depth:l,useToJSON:f,serialize:d})=>{if(n||(n=Array.isArray(e)?[]:!d&&u(e)?(e=>{let t=r.get(e)??Error;return t===AggregateError?new t([]):new t})(e.name):{}),t.push(e),l>=c)return n;if(f&&"function"==typeof e.toJSON&&!i.has(e))return(e=>{i.add(e);let t=e.toJSON();return i.delete(e),t})(e);let g=e=>a({from:e,seen:[...t],forceEnumerable:s,maxDepth:c,depth:l,useToJSON:f,serialize:d});for(let[r,o]of Object.entries(e)){if(o&&o instanceof Uint8Array&&"Buffer"===o.constructor.name){n[r]="[object Buffer]";continue}if(null!==o&&"object"==typeof o&&"function"==typeof o.pipe){n[r]="[object Stream]";continue}if("function"!=typeof o){if(!o||"object"!=typeof o){try{n[r]=o}catch{}continue}if(!t.includes(e[r])){l++,n[r]=g(e[r]);continue}n[r]="[Circular]"}}if(d||n instanceof Error)for(let{property:t,enumerable:r}of o)void 0!==e[t]&&null!==e[t]&&Object.defineProperty(n,t,{value:u(e[t])||Array.isArray(e[t])?g(e[t]):e[t],enumerable:!!s||r,configurable:!0,writable:!0});return n};function s(e,t={}){let{maxDepth:n=1/0,useToJSON:r=!0}=t;return"object"==typeof e&&null!==e?a({from:e,seen:[],forceEnumerable:!0,maxDepth:n,depth:0,useToJSON:r,serialize:!0}):"function"==typeof e?`[Function: ${e.name||"anonymous"}]`:e}function u(e){return!!e&&"object"==typeof e&&"string"==typeof e.name&&"string"==typeof e.message&&"string"==typeof e.stack}},52430:(e,t,n)=>{n.d(t,{$b:()=>r,rj:()=>o});var r=(e=>(e.info="info",e.warn="warn",e.error="error",e.debug="debug",e.trace="trace",e.fatal="fatal",e))(r||{}),o={trace:10,debug:20,info:30,warn:40,error:50,fatal:60}},55746:(e,t,n)=>{n.d(t,{R:()=>o});var r=n(22660),o=class extends r.jL{shipToLogger({logLevel:e,messages:t,data:n,hasData:o}){let i=[];switch(i.push(t.join(" ")),n&&o&&i.push(n),e){case r.$b.info:this.logger.info(...i);break;case r.$b.warn:this.logger.warn(...i);break;case r.$b.error:this.logger.error(...i);break;case r.$b.trace:case r.$b.debug:this.logger.debug(...i);break;case r.$b.fatal:this.logger.error(...i)}return i}}},57975:(e,t,n)=>{n.d(t,{yf:()=>tW});var r,o,i,a,s,u,c,l,f,d,g,h,p,v,b={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},m=console,y={};Object.keys(b).forEach(function(e){y[e]=m[e]});var w="Datadog Browser SDK:",x={debug:y.debug.bind(m,w),log:y.log.bind(m,w),info:y.info.bind(m,w),warn:y.warn.bind(m,w),error:y.error.bind(m,w)};function L(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return e.apply(void 0,n)}catch(e){x.error(t,e)}}}var C=function(e,t,n){if(n||2==arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},S=!1;function E(e){S=e}function _(e,t,n){var o=n.value;n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(r?T(o):o).apply(this,e)}}function T(e){return function(){return O(e,this,arguments)}}function O(e,t,n){try{return e.apply(t,n)}catch(e){if(k(e),r)try{r(e)}catch(e){k(e)}}}function k(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];S&&x.error.apply(x,C(["[MONITOR]"],e,!1))}function M(e,t){return -1!==e.indexOf(t)}function R(e){if(Array.from)return Array.from(e);var t=[];if(e instanceof Set)e.forEach(function(e){return t.push(e)});else for(var n=0;n<e.length;n++)t.push(e[n]);return t}function P(e){return Object.keys(e).map(function(t){return e[t]})}function A(e,t){return e.slice(0,t.length)===t}function B(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.forEach(function(t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}),e}function D(){if("object"==typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var e=_dd_temp_;return delete Object.prototype._dd_temp_,"object"!=typeof e&&(e="object"==typeof self?self:"object"==typeof window?window:{}),e}var j=/[^\u0000-\u007F]/;function I(e){return j.test(e)?void 0!==window.TextEncoder?new TextEncoder().encode(e).length:new Blob([e]).size:e.length}function F(e,t){var n,r=D();return r.Zone&&"function"==typeof r.Zone.__symbol__&&(n=e[r.Zone.__symbol__(t)]),n||(n=e[t]),n}function $(e,t){return F(D(),"setTimeout")(T(e),t)}function N(e){F(D(),"clearTimeout")(e)}function U(e,t){return F(D(),"setInterval")(T(e),t)}function q(e){F(D(),"clearInterval")(e)}function G(e,t,n){var r,o,i=!n||void 0===n.leading||n.leading,a=!n||void 0===n.trailing||n.trailing,s=!1;return{throttled:function(){for(var n=[],u=0;u<arguments.length;u++)n[u]=arguments[u];if(s){r=n;return}i?e.apply(void 0,n):r=n,s=!0,o=$(function(){a&&r&&e.apply(void 0,r),s=!1,r=void 0},t)},cancel:function(){N(o),s=!1,r=void 0}}}function H(){}function z(e){return null===e?"null":Array.isArray(e)?"array":typeof e}function J(e,t,n){if(void 0===n&&(n=function(){if("undefined"!=typeof WeakSet){var e=new WeakSet;return{hasAlreadyBeenSeen:function(t){var n=e.has(t);return n||e.add(t),n}}}var t=[];return{hasAlreadyBeenSeen:function(e){var n=t.indexOf(e)>=0;return n||t.push(e),n}}}()),void 0===t)return e;if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){var r=t.flags||[t.global?"g":"",t.ignoreCase?"i":"",t.multiline?"m":"",t.sticky?"y":"",t.unicode?"u":""].join("");return new RegExp(t.source,r)}if(!n.hasAlreadyBeenSeen(t)){if(Array.isArray(t)){for(var o=Array.isArray(e)?e:[],i=0;i<t.length;++i)o[i]=J(o[i],t[i],n);return o}var a="object"===z(e)?e:{};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(a[s]=J(a[s],t[s],n));return a}}function V(e){return J(void 0,e)}function W(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++){var o=t[r];null!=o&&(e=J(e,o))}return e}function X(e,t,n){if("object"!=typeof e||null===e)return JSON.stringify(e);var r=K(Object.prototype),o=K(Array.prototype),i=K(Object.getPrototypeOf(e)),a=K(e);try{return JSON.stringify(e,t,n)}catch(e){return"<error: unable to serialize object>"}finally{r(),o(),i(),a()}}function K(e){var t=e.toJSON;return t?(delete e.toJSON,function(){e.toJSON=t}):H}function Z(e,t){void 0===t&&(t=225280);var n,r=K(Object.prototype),o=K(Array.prototype),i=[],a=new WeakMap,s=Y(e,"$",void 0,i,a),u=(null==(n=JSON.stringify(s))?void 0:n.length)||0;if(u>t)return void Q(t,"discarded",e);for(;i.length>0&&u<t;){var c=i.shift(),l=0;if(Array.isArray(c.source))for(var f=0;f<c.source.length;f++){var d=Y(c.source[f],c.path,f,i,a);if(void 0!==d?u+=JSON.stringify(d).length:u+=4,u+=l,l=1,u>t){Q(t,"truncated",e);break}c.target[f]=d}else for(var f in c.source)if(Object.prototype.hasOwnProperty.call(c.source,f)){var d=Y(c.source[f],c.path,f,i,a);if(void 0!==d&&(u+=JSON.stringify(d).length+l+f.length+3,l=1),u>t){Q(t,"truncated",e);break}c.target[f]=d}}return r(),o(),s}function Y(e,t,n,r,o){var i,a=function(e){if(e&&"function"==typeof e.toJSON)try{return e.toJSON()}catch(e){}return e}(e);if(!a||"object"!=typeof a){return"bigint"==typeof(i=a)?"[BigInt] ".concat(i.toString()):"function"==typeof i?"[Function] ".concat(i.name||"unknown"):"symbol"==typeof i?"[Symbol] ".concat(i.description||i.toString()):i}var s=function(e){try{if(e instanceof Event)return{isTrusted:e.isTrusted};var t=Object.prototype.toString.call(e).match(/\[object (.*)\]/);if(t&&t[1])return"[".concat(t[1],"]")}catch(e){}return"[Unserializable]"}(a);if("[Object]"!==s&&"[Array]"!==s&&"[Error]"!==s)return s;if(o.has(e))return"[Reference seen at ".concat(o.get(e),"]");var u=void 0!==n?"".concat(t,".").concat(n):t,c=Array.isArray(a)?[]:{};return o.set(e,u),r.push({source:a,target:c,path:u}),c}function Q(e,t,n){x.warn("The data provided has been ".concat(t," as it is over the limit of ").concat(e," characters:"),n)}var ee=function(){function e(e){this.onFirstSubscribe=e,this.observers=[]}return e.prototype.subscribe=function(e){var t=this;return!this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe()||void 0),this.observers.push(e),{unsubscribe:function(){t.observers=t.observers.filter(function(t){return e!==t}),!t.observers.length&&t.onLastUnsubscribe&&t.onLastUnsubscribe()}}},e.prototype.notify=function(e){this.observers.forEach(function(t){return t(e)})},e}();function et(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=new ee(function(){var t=e.map(function(e){return e.subscribe(function(e){return n.notify(e)})});return function(){return t.forEach(function(e){return e.unsubscribe()})}});return n}var en=((o={})[0]="feature flag evaluation",o[1]="user",o[2]="global context",o[3]="logger context",o);function er(e,t){void 0===t&&(t=I);var n,r={},o=!1,i=new ee,a=G(function(r){n=t(X(r)),o||(o=n>3072&&(x.warn("The ".concat(en[e]," data exceeds the recommended ").concat(3,"KiB threshold. More details: https://docs.datadoghq.com/real_user_monitoring/browser/troubleshooting/#customer-data-exceeds-the-recommended-3kib-warning")),!0))},200).throttled,s={getBytesCount:function(){return n},get:function(){return r},add:function(e,t){r[e]=t,a(r),i.notify()},remove:function(e){delete r[e],a(r),i.notify()},set:function(e){a(r=e),i.notify()},getContext:function(){return V(r)},setContext:function(e){"object"===z(e)?a(r=Z(e)):s.clearContext(),i.notify()},setContextProperty:function(e,t){r[e]=Z(t),a(r),i.notify()},removeContextProperty:function(e){delete r[e],a(r),i.notify()},clearContext:function(){r={},n=0,i.notify()},changeObservable:i};return s}var eo=function(){function e(){this.buffer=[]}return e.prototype.add=function(e){this.buffer.push(e)>500&&this.buffer.splice(0,1)},e.prototype.drain=function(){this.buffer.forEach(function(e){return e()}),this.buffer.length=0},e}();function ei(){return new Date().getTime()}function ea(){return performance.now()}function es(){return{relative:ea(),timeStamp:ei()}}function eu(){return void 0===i&&(i=performance.timing.navigationStart),i}function ec(){var e=D().DatadogEventBridge;if(e)return{getAllowedWebViewHosts:function(){return JSON.parse(e.getAllowedWebViewHosts())},send:function(t,n){e.send(JSON.stringify({eventType:t,event:n}))}}}function el(e){void 0===e&&(e=null==(t=D().location)?void 0:t.hostname);var t,n=ec();return!!n&&n.getAllowedWebViewHosts().some(function(t){var n,r;return e===t||(n=e,r=".".concat(t),n.slice(-r.length)===r)})}function ef(e,t,n,r,o){var i=void 0===o?{}:o,a=i.once,s=i.capture,u=i.passive,c=T(a?function(e){d(),r(e)}:r),l=u?{capture:s,passive:u}:s,f=F(t,"addEventListener");function d(){var e=F(t,"removeEventListener");n.forEach(function(n){return e.call(t,n,c,l)})}return n.forEach(function(e){return f.call(t,e,c,l)}),{stop:d}}var ed=[];function eg(e,t,n,r){void 0===r&&(r=I);var o,i,a=(o=t,i=n,"".concat("_dd_c","_").concat(o,"_").concat(i)),s=er(n,r);return u(),ed.push(ef(e,window,["storage"],function(e){a===e.key&&u()},void 0)),s.changeObservable.subscribe(function(){localStorage.setItem(a,JSON.stringify(s.getContext()))}),s;function u(){var e=localStorage.getItem(a),t=null!==e?JSON.parse(e):{};s.setContext(t)}}function eh(e){var t=B({},e);return["id","name","email"].forEach(function(e){e in t&&(t[e]=String(t[e]))}),t}!function(e){e.PAGEHIDE="pagehide",e.FEATURE_FLAGS="feature_flags",e.RESOURCE_PAGE_STATES="resource_page_states",e.PAGE_STATES="page_states",e.COLLECT_FLUSH_REASON="collect_flush_reason",e.NO_RESOURCE_DURATION_FROZEN_STATE="no_resource_duration_frozen_state",e.SCROLLMAP="scrollmap",e.INTERACTION_TO_NEXT_PAINT="interaction_to_next_paint",e.WEB_VITALS_ATTRIBUTION="web_vitals_attribution",e.DISABLE_REPLAY_INLINE_CSS="disable_replay_inline_css"}(a||(a={}));var ep=new Set;function ev(e){return 0!==e&&100*Math.random()<=e}function eb(e){return"number"==typeof e&&e>=0&&e<=100}function em(e){return 0===Object.keys(e).length}function ey(e){return e?(parseInt(e,10)^16*Math.random()>>parseInt(e,10)/4).toString(16):"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,ey)}var ew=144e5,ex=9e5;function eL(e,t,n,r){var o=new Date;o.setTime(o.getTime()+n);var i="expires=".concat(o.toUTCString()),a=r&&r.crossSite?"none":"strict",s=r&&r.domain?";domain=".concat(r.domain):"",u=r&&r.secure?";secure":"";document.cookie="".concat(e,"=").concat(t,";").concat(i,";path=/;samesite=").concat(a).concat(s).concat(u)}function eC(e){var t,n;return t=document.cookie,(n=new RegExp("(?:^|;)\\s*".concat(e,"\\s*=\\s*([^;]+)")).exec(t))?n[1]:void 0}function eS(e,t){eL(e,"",0,t)}var eE="_dd_s",e_=/^([a-z]+)=([a-z0-9-]+)$/;function eT(e){e.expire=String(ei()+ex)}function eO(e){return Object.keys(e).map(function(t){return[t,e[t]]}).map(function(e){var t=e[0],n=e[1];return"".concat(t,"=").concat(n)}).join("&")}function ek(e){var t,n={};return(t=e)&&(-1!==t.indexOf("&")||e_.test(t))&&e.split("&").forEach(function(e){var t=e_.exec(e);if(null!==t){var r=t[1],o=t[2];n[r]=o}}),n}function eM(){return ek(eC(eE))}function eR(e){localStorage.setItem(eE,eO(e))}function eP(){return ek(localStorage.getItem(eE))}function eA(){localStorage.removeItem(eE)}var eB=[];function eD(e,t,n){void 0===n&&(n=0);var r,o,i=t.isLockEnabled,a=t.retrieveSession,s=t.persistSession,u=t.clearSession;if(c||(c=e),e!==c)return void eB.push(e);if(i&&n>=100)return void eI(t);var l=a();if(i&&(l.lock||(o=ey(),l.lock=o,s(l),(l=a()).lock!==o)))return void ej(e,t,n);var f=e.process(l);if(i&&(l=a()).lock!==o)return void ej(e,t,n);if(f&&(em(f)?u():(eT(f),s(f))),i&&!(f&&em(f))){if((l=a()).lock!==o)return void ej(e,t,n);delete l.lock,s(l),f=l}null==(r=e.after)||r.call(e,f||l),eI(t)}function ej(e,t,n){$(function(){eD(e,t,n+1)},10)}function eI(e){c=void 0;var t=eB.shift();t&&eD(t,e)}function eF(e){return function(e,t){var n=function(){if(void 0===l)try{var e=new e$("http://test/path");l="http://test/path"===e.href}catch(e){l=!1}return l?e$:void 0}();if(n)try{return void 0!==t?new n(e,t):new n(e)}catch(n){throw Error("Failed to construct URL: ".concat(String(n)," ").concat(X({url:e,base:t})))}if(void 0===t&&!/:/.test(e))throw Error("Invalid URL: '".concat(e,"'"));var r=document,o=r.createElement("a");if(void 0!==t){var i=(r=document.implementation.createHTMLDocument("")).createElement("base");i.href=t,r.head.appendChild(i),r.body.appendChild(o)}return o.href=e,o}(e,function(){var e=window.location;if(e.origin&&"null"!==e.origin)return e.origin;var t=e.host.replace(/(:80|:443)$/,"");return"".concat(e.protocol,"//").concat(t)}()).href}var e$=URL,eN="datadoghq.com",eU={logs:"logs",rum:"rum",sessionReplay:"session-replay"},eq={logs:"logs",rum:"rum",sessionReplay:"replay"};function eG(e,t,n){var r=function(e,t){var n="/api/v2/".concat(eq[t]),r=e.proxy,o=e.proxyUrl;if(r){var i=eF(r);return function(e){return"".concat(i,"?ddforward=").concat(encodeURIComponent("".concat(n,"?").concat(e)))}}var a=function(e,t){var n=e.site,r=void 0===n?eN:n,o=e.internalAnalyticsSubdomain;if(o&&r===eN)return"".concat(o,".").concat(eN);var i=r.split("."),a=i.pop(),s="ap1.datadoghq.com"!==r?"".concat(eU[t],"."):"";return"".concat(s,"browser-intake-").concat(i.join("-"),".").concat(a)}(e,t);if(void 0===r&&o){var s=eF(o);return function(e){return"".concat(s,"?ddforward=").concat(encodeURIComponent("https://".concat(a).concat(n,"?").concat(e)))}}return function(e){return"https://".concat(a).concat(n,"?").concat(e)}}(e,t);return{build:function(o,i){var s,u,c,l,f,d,g,h,p,v,b,m,y;return r((s=e,u=t,c=n,l=o,f=i,g=s.clientToken,h=s.internalAnalyticsSubdomain,p=f.retry,v=f.flushReason,b=f.encoding,m=["sdk_version:".concat("4.50.1"),"api:".concat(l)].concat(c),v&&(d=a.COLLECT_FLUSH_REASON,ep.has(d))&&m.push("flush_reason:".concat(v)),p&&m.push("retry_count:".concat(p.count),"retry_after:".concat(p.lastFailureStatus)),y=["ddsource=browser","ddtags=".concat(encodeURIComponent(m.join(","))),"dd-api-key=".concat(g),"dd-evp-origin-version=".concat(encodeURIComponent("4.50.1")),"dd-evp-origin=browser","dd-request-id=".concat(ey())],b&&y.push("dd-evp-encoding=".concat(b)),"rum"===u&&y.push("batch_time=".concat(ei())),h&&y.reverse(),y.join("&")))},urlPrefix:r(""),endpointType:t}}var eH=/[^a-z0-9_:./-]/;function ez(e,t){var n=200-e.length-1;(t.length>n||eH.test(t))&&x.warn("".concat(e," value doesn't meet tag requirements and will be sanitized"));var r=t.replace(/,/g,"_");return"".concat(e,":").concat(r)}function eJ(e){var t=[],n=e1(e,"stack"),r=String(e);return n&&A(n,r)&&(n=n.slice(r.length)),n&&n.split("\n").forEach(function(e){var n=function(e){var t=eX.exec(e);if(t){var n=t[2]&&0===t[2].indexOf("native"),r=t[2]&&0===t[2].indexOf("eval"),o=eK.exec(t[2]);return r&&o&&(t[2]=o[1],t[3]=o[2],t[4]=o[3]),{args:n?[t[2]]:[],column:t[4]?+t[4]:void 0,func:t[1]||"?",line:t[3]?+t[3]:void 0,url:n?void 0:t[2]}}}(e)||function(e){var t=eZ.exec(e);if(t)return{args:[],column:t[3]?+t[3]:void 0,func:"?",line:t[2]?+t[2]:void 0,url:t[1]}}(e)||function(e){var t=eY.exec(e);if(t)return{args:[],column:t[4]?+t[4]:void 0,func:t[1]||"?",line:+t[3],url:t[2]}}(e)||function(e){var t=eQ.exec(e);if(t){var n=t[3]&&t[3].indexOf(" > eval")>-1,r=e0.exec(t[3]);return n&&r&&(t[3]=r[1],t[4]=r[2],t[5]=void 0),{args:t[2]?t[2].split(","):[],column:t[5]?+t[5]:void 0,func:t[1]||"?",line:t[4]?+t[4]:void 0,url:t[3]}}}(e);n&&(!n.func&&n.line&&(n.func="?"),t.push(n))}),{message:e1(e,"message"),name:e1(e,"name"),stack:t}}var eV="((?:file|https?|blob|chrome-extension|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)",eW="(?::(\\d+))",eX=RegExp("^\\s*at (.*?) ?\\(".concat(eV).concat(eW,"?").concat(eW,"?\\)?\\s*$"),"i"),eK=new RegExp("\\((\\S*)".concat(eW).concat(eW,"\\)")),eZ=RegExp("^\\s*at ?".concat(eV).concat(eW,"?").concat(eW,"??\\s*$"),"i"),eY=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,eQ=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,e0=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function e1(e,t){if("object"==typeof e&&e&&t in e){var n=e[t];return"string"==typeof n?n:void 0}}var e2="No stack, consider using an instance of Error";function e3(e){var t,n,r,o,i,a,s=e.stackTrace,u=e.originalError,c=e.handlingStack,l=e.startClocks,f=e.nonErrorPrefix,d=e.source,g=e.handling,h=u instanceof Error,p=(t=s,n=h,r=f,o=u,(null==t?void 0:t.message)&&(null==t?void 0:t.name)?t.message:n?"Empty message":"".concat(r," ").concat(X(Z(o)))),v=(i=h,void 0!==(a=s)&&(i||a.stack.length>0&&(a.stack.length>1||void 0!==a.stack[0].url)))?e5(s):e2,b=h?function(e,t){for(var n=e,r=[];(null==n?void 0:n.cause)instanceof Error&&r.length<10;){var o=eJ(n.cause);r.push({message:n.cause.message,source:t,type:null==o?void 0:o.name,stack:o&&e5(o)}),n=n.cause}return r.length?r:void 0}(u,d):void 0,m=null==s?void 0:s.name,y=e4(u);return{startClocks:l,source:d,handling:g,handlingStack:c,originalError:u,type:m,message:p,stack:v,causes:b,fingerprint:y}}function e4(e){return e instanceof Error&&"dd_fingerprint"in e?String(e.dd_fingerprint):void 0}function e5(e){var t=e6(e);return e.stack.forEach(function(e){var n="?"===e.func?"<anonymous>":e.func,r=e.args&&e.args.length>0?"(".concat(e.args.join(", "),")"):"",o=e.line?":".concat(e.line):"",i=e.line&&e.column?":".concat(e.column):"";t+="\n  at ".concat(n).concat(r," @ ").concat(e.url).concat(o).concat(i)}),t}function e6(e){return"".concat(e.name||"Error",": ").concat(e.message)}var e8={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function e9(e,t,n,r,o){return n?e5({name:e,message:t,stack:[{func:"?",url:n,line:null!=r?r:void 0,column:null!=o?o:void 0}]}):void 0}function e7(e,t,n){var r;return void 0===e?[]:"all"===e||Array.isArray(e)&&e.every(function(e){return M(t,e)})?"all"===e?t:(r=new Set,e.forEach(function(e){return r.add(e)}),R(r)):void x.error("".concat(n,' should be "all" or an array with allowed values "').concat(t.join('", "'),'"'))}var te={AGENT:"agent",CONSOLE:"console",LOGGER:"logger",NETWORK:"network",SOURCE:"source",REPORT:"report"},tt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},tn={debug:"debug",error:"error",info:"info",warn:"warn"},tr={console:"console",http:"http"},to=Object.keys(tn),ti=function(){function e(e,t,n,r,o){void 0===n&&(n=tr.http),void 0===r&&(r=tn.debug),void 0===o&&(o={}),this.handleLogStrategy=e,this.handlerType=n,this.level=r,this.contextManager=er(3),this.contextManager.set(B({},o,t?{logger:{name:t}}:void 0))}return e.prototype.log=function(e,t,n,r){if(void 0===n&&(n=tn.info),n===tn.error&&(o={origin:te.LOGGER}),null!=r){var o,i=e3({stackTrace:r instanceof Error?eJ(r):void 0,originalError:r,nonErrorPrefix:"Provided",source:te.LOGGER,handling:"handled",startClocks:es()});o={origin:te.LOGGER,stack:i.stack,kind:i.type,message:i.message}}var a=Z(t),s=o?W({error:o},a):a;this.handleLogStrategy({message:Z(e),context:s,status:n},this)},e.prototype.debug=function(e,t,n){this.log(e,t,tn.debug,n)},e.prototype.info=function(e,t,n){this.log(e,t,tn.info,n)},e.prototype.warn=function(e,t,n){this.log(e,t,tn.warn,n)},e.prototype.error=function(e,t,n){this.log(e,t,tn.error,n)},e.prototype.setContext=function(e){this.contextManager.set(e)},e.prototype.getContext=function(){return this.contextManager.get()},e.prototype.addContext=function(e,t){this.contextManager.add(e,t)},e.prototype.removeContext=function(e){this.contextManager.remove(e)},e.prototype.setHandler=function(e){this.handlerType=e},e.prototype.getHandler=function(){return this.handlerType},e.prototype.setLevel=function(e){this.level=e},e.prototype.getLevel=function(){return this.level},tt([_],e.prototype,"log",null),e}(),ta="logs";function ts(e,t){var n=window.__ddBrowserSdkExtensionCallback;n&&n({type:e,payload:t})}var tu={log:"log",configuration:"configuration"},tc=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","https://d3uc069fcn7uxw.cloudfront.net","https://d20xtzwzcl0ceb.cloudfront.net","http://localhost","<anonymous>"],tl=["ddog-gov.com"],tf={maxEventsPerPage:0,sentEventCount:0,telemetryEnabled:!1,telemetryConfigurationEnabled:!1};function td(e,t){k(b.debug,e,t),th(B({type:tu.log,message:e,status:"debug"},t))}function tg(e,t){th(B({type:tu.log,status:"error"},function(e){if(e instanceof Error){var t,n=eJ(e);return{error:{kind:n.name,stack:e5(((t=n).stack=t.stack.filter(function(e){return!e.url||tc.some(function(t){return A(e.url,t)})}),t))},message:n.message}}return{error:{stack:e2},message:"".concat("Uncaught"," ").concat(X(e))}}(e),t))}function th(e){f&&tf.sentEventCount<tf.maxEventsPerPage&&(tf.sentEventCount+=1,f(e))}var tp={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function tv(){return!!(window._DATADOG_SYNTHETICS_INJECTS_RUM||eC("datadog-synthetics-injects-rum"))}var tb=function(){function e(e,t,n){var r=this;this.request=e,this.flushController=t,this.messageBytesLimit=n,this.pushOnlyBuffer=[],this.upsertBuffer={},this.flushSubscription=this.flushController.flushObservable.subscribe(function(e){return r.flush(e)})}return e.prototype.add=function(e){this.addOrUpdate(e)},e.prototype.upsert=function(e,t){this.addOrUpdate(e,t)},e.prototype.stop=function(){this.flushSubscription.unsubscribe()},e.prototype.flush=function(e){var t,n=this.pushOnlyBuffer.concat(P(this.upsertBuffer));this.pushOnlyBuffer=[],this.upsertBuffer={};var r={data:n.join("\n"),bytesCount:e.bytesCount,flushReason:e.reason};(t=e.reason,M(P(tp),t))?this.request.sendOnExit(r):this.request.send(r)},e.prototype.addOrUpdate=function(e,t){var n=this.process(e),r=n.processedMessage,o=n.messageBytesCount;if(o>=this.messageBytesLimit)return void x.warn("Discarded a message whose size was bigger than the maximum allowed size ".concat(this.messageBytesLimit,"KB."));this.hasMessageFor(t)&&this.remove(t),this.push(r,o,t)},e.prototype.process=function(e){var t=X(e),n=I(t);return{processedMessage:t,messageBytesCount:n}},e.prototype.push=function(e,t,n){var r=+(this.flushController.messagesCount>0);this.flushController.notifyBeforeAddMessage(t+r),void 0!==n?this.upsertBuffer[n]=e:this.pushOnlyBuffer.push(e),this.flushController.notifyAfterAddMessage()},e.prototype.remove=function(e){var t=this.upsertBuffer[e];delete this.upsertBuffer[e];var n=I(t),r=+(this.flushController.messagesCount>1);this.flushController.notifyAfterRemoveMessage(n+r)},e.prototype.hasMessageFor=function(e){return void 0!==e&&void 0!==this.upsertBuffer[e]},e}(),tm=3145728;function ty(e,t,n,r,o){0===t.transportStatus&&0===t.queuedPayloads.size()&&t.bandwidthMonitor.canHandle(e)?tw(e,t,n,{onSuccess:function(){return tx(0,t,n,r,o)},onFailure:function(){t.queuedPayloads.enqueue(e),function e(t,n,r,o){2===t.transportStatus&&$(function(){tw(t.queuedPayloads.first(),t,n,{onSuccess:function(){t.queuedPayloads.dequeue(),t.currentBackoffTime=1e3,tx(1,t,n,r,o)},onFailure:function(){t.currentBackoffTime=Math.min(6e4,2*t.currentBackoffTime),e(t,n,r,o)}})},t.currentBackoffTime)}(t,n,r,o)}}):t.queuedPayloads.enqueue(e)}function tw(e,t,n,r){var o=r.onSuccess,i=r.onFailure;t.bandwidthMonitor.add(e),n(e,function(n){var r;t.bandwidthMonitor.remove(e),"opaque"!==(r=n).type&&(0===r.status&&!navigator.onLine||408===r.status||429===r.status||r.status>=500)?(t.transportStatus=t.bandwidthMonitor.ongoingRequestCount>0?1:2,e.retry={count:e.retry?e.retry.count+1:1,lastFailureStatus:n.status},i()):(t.transportStatus=0,o())})}function tx(e,t,n,r,o){0===e&&t.queuedPayloads.isFull()&&!t.queueFullReported&&(o({message:"Reached max ".concat(r," events size queued for upload: ").concat(tm/1048576,"MiB"),source:te.AGENT,startClocks:es()}),t.queueFullReported=!0);var i=t.queuedPayloads;for(t.queuedPayloads=tL();i.size()>0;)ty(i.dequeue(),t,n,r,o)}function tL(){var e=[];return{bytesCount:0,enqueue:function(t){this.isFull()||(e.push(t),this.bytesCount+=t.bytesCount)},first:function(){return e[0]},dequeue:function(){var t=e.shift();return t&&(this.bytesCount-=t.bytesCount),t},size:function(){return e.length},isFull:function(){return this.bytesCount>=tm}}}var tC=!1;function tS(e,t,n,r){var o=new XMLHttpRequest;o.open("POST",t,!0),ef(e,o,["loadend"],function(){null==r||r({status:o.status})},{once:!0}),o.send(n)}function tE(e,t,n,r,o,i){var a=u(e,t.endpoint),s=n&&u(e,n.endpoint);function u(e,t){var n,a,s;return new tb((n=e.batchBytesLimit,a={transportStatus:0,currentBackoffTime:1e3,bandwidthMonitor:{ongoingRequestCount:0,ongoingByteCount:0,canHandle:function(e){return 0===this.ongoingRequestCount||this.ongoingByteCount+e.bytesCount<=81920&&this.ongoingRequestCount<32},add:function(e){this.ongoingRequestCount+=1,this.ongoingByteCount+=e.bytesCount},remove:function(e){this.ongoingRequestCount-=1,this.ongoingByteCount-=e.bytesCount}},queuedPayloads:tL(),queueFullReported:!1},s=function(r,o){var i,a,s,u,c;return i=e,a=t,s=n,u=r,c=o,void(function(){try{return window.Request&&"keepalive"in new Request("http://a")}catch(e){return!1}}()&&u.bytesCount<s?fetch(a.build("fetch",u),{method:"POST",body:u.data,keepalive:!0,mode:"cors"}).then(T(function(e){return null==c?void 0:c({status:e.status,type:e.type})}),T(function(){tS(i,a.build("xhr",u),u.data,c)})):tS(i,a.build("xhr",u),u.data,c))},{send:function(e){ty(e,a,s,t.endpointType,r)},sendOnExit:function(r){!function(e,t,n,r){if(navigator.sendBeacon&&r.bytesCount<n)try{var o,i=t.build("beacon",r);if(navigator.sendBeacon(i,r.data))return}catch(e){o=e,tC||(tC=!0,tg(o))}tS(e,t.build("xhr",r),r.data)}(e,t,n,r)}}),function(e){var t,n=e.messagesLimit,r=e.bytesLimit,o=e.durationLimit,i=e.pageExitObservable,a=e.sessionExpireObservable,s=i.subscribe(function(e){return d(e.reason)}),u=a.subscribe(function(){return d("session_expire")}),c=new ee(function(){return function(){s.unsubscribe(),u.unsubscribe()}}),l=0,f=0;function d(e){if(0!==f){var t=f,n=l;f=0,l=0,g(),c.notify({reason:e,messagesCount:t,bytesCount:n})}}function g(){N(t),t=void 0}return{flushObservable:c,get messagesCount(){return f},notifyBeforeAddMessage:function(e){l+e>=r&&d("bytes_limit"),f+=1,l+=e,void 0===t&&(t=$(function(){d("duration_limit")},o))},notifyAfterAddMessage:function(){f>=n?d("messages_limit"):l>=r&&d("bytes_limit")},notifyAfterRemoveMessage:function(e){l-=e,0==(f-=1)&&g()}}}({messagesLimit:e.batchMessagesLimit,bytesLimit:e.batchBytesLimit,durationLimit:e.flushTimeout,pageExitObservable:o,sessionExpireObservable:i}),e.messageBytesLimit)}return{flushObservable:a.flushController.flushObservable,add:function(e,t){void 0===t&&(t=!0),a.add(e),s&&t&&s.add(n.transformMessage?n.transformMessage(e):e)},upsert:function(e,t){a.upsert(e,t),s&&s.upsert(n.transformMessage?n.transformMessage(e):e,t)},stop:function(){a.stop(),null==s||s.stop()}}}var t_=1/0,tT=function(){function e(e,t){var n=this;this.expireDelay=e,this.maxEntries=t,this.entries=[],this.clearOldValuesInterval=U(function(){return n.clearOldValues()},6e4)}return e.prototype.add=function(e,t){var n=this,r={value:e,startTime:t,endTime:t_,remove:function(){var e=n.entries.indexOf(r);e>=0&&n.entries.splice(e,1)},close:function(e){r.endTime=e}};return this.maxEntries&&this.entries.length>=this.maxEntries&&this.entries.pop(),this.entries.unshift(r),r},e.prototype.find=function(e){void 0===e&&(e=t_);for(var t=0,n=this.entries;t<n.length;t++){var r=n[t];if(r.startTime<=e){if(e<=r.endTime)return r.value;break}}},e.prototype.closeActive=function(e){var t=this.entries[0];t&&t.endTime===t_&&t.close(e)},e.prototype.findAll=function(e,t){void 0===e&&(e=t_),void 0===t&&(t=0);var n=e+t;return this.entries.filter(function(t){return t.startTime<=n&&e<=t.endTime}).map(function(e){return e.value})},e.prototype.reset=function(){this.entries=[]},e.prototype.stop=function(){q(this.clearOldValuesInterval)},e.prototype.clearOldValues=function(){for(var e=ea()-this.expireDelay;this.entries.length>0&&this.entries[this.entries.length-1].endTime<e;)this.entries.pop()},e}(),tO=[];function tk(e){return ev(e.sessionSampleRate)?"1":"0"}var tM=((d={})[tn.debug]=0,d[tn.info]=1,d[tn.warn]=2,d[tn.error]=3,d);function tR(e,t,n){var r=n.getHandler(),o=Array.isArray(r)?r:[r];return tM[e]>=tM[n.getLevel()]&&M(o,t)}var tP=!1;function tA(e){var t=window;if(tv()){var n,r,o=i(t.DD_RUM_SYNTHETICS);return o||tP||(tP=!0,td("Logs sent before RUM is injected by the synthetics worker",{testId:"string"==typeof(n=window._DATADOG_SYNTHETICS_PUBLIC_ID||eC("datadog-synthetics-public-id"))?n:void 0,resultId:"string"==typeof(r=window._DATADOG_SYNTHETICS_RESULT_ID||eC("datadog-synthetics-result-id"))?r:void 0})),o}return i(t.DD_RUM);function i(t){if(t&&t.getInternalContext)return t.getInternalContext(e)}}var tB={},tD=((g={})[b.log]=tn.info,g[b.debug]=tn.debug,g[b.info]=tn.info,g[b.warn]=tn.warn,g[b.error]=tn.error,g),tj=((h={})[e8.cspViolation]=tn.error,h[e8.intervention]=tn.error,h[e8.deprecation]=tn.warn,h);function tI(e,t,n){var r=e[t],o=n(r),i=function(){if("function"==typeof o)return o.apply(this,arguments)};return e[t]=i,{stop:function(){e[t]===i?e[t]=r:o=r}}}function tF(e,t,n){var r=n.before,o=n.after;return tI(e,t,function(e){return function(){var t,n=arguments;return r&&O(r,this,n),"function"==typeof e&&(t=e.apply(this,n)),o&&O(o,this,n),t}})}var t$=new WeakMap;function tN(e,t){t$.set(this,{state:"open",method:e,url:eF(String(t))})}function tU(e,t){var n=this,r=t$.get(this);if(r){r.state="start",r.startTime=ea(),r.startClocks=es(),r.isAborted=!1,r.xhr=this;var o=!1,i=tF(this,"onreadystatechange",{before:function(){this.readyState===XMLHttpRequest.DONE&&a()}}).stop,a=function(){if(s(),i(),!o){var e;o=!0,r.state="complete",e=r.startClocks.timeStamp,r.duration=ei()-e,r.status=n.status,t.notify(B({},r))}},s=ef(e,this,["loadend"],a,void 0).stop;t.notify(r)}}function tq(){var e=t$.get(this);e&&(e.isAborted=!0)}function tG(e,t,n){var r=n&&n.method||t instanceof Request&&t.method||"GET",o=t instanceof Request?t.url:eF(String(t)),i={state:"start",init:n,input:t,method:r,startClocks:es(),url:o};return e.notify(i),i}function tH(e,t,n){var r=function(t){n.state="resolve","stack"in t||t instanceof Error?(n.status=0,n.isAborted=t instanceof DOMException&&t.code===DOMException.ABORT_ERR,n.error=t):"status"in t&&(n.response=t,n.responseType=t.type,n.status=t.status,n.isAborted=!1),e.notify(n)};t.then(T(r),T(r))}function tz(e,t){return e.length>t.requestErrorResponseLengthLimit?"".concat(e.substring(0,t.requestErrorResponseLengthLimit),"..."):e}var tJ=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\s\S]*)$/,tV=function(){function e(){this.callbacks={}}return e.prototype.notify=function(e,t){var n=this.callbacks[e];n&&n.forEach(function(e){return e(t)})},e.prototype.subscribe=function(e,t){var n=this;return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),{unsubscribe:function(){n.callbacks[e]=n.callbacks[e].filter(function(e){return t!==e})}}},e}(),tW=function(e){var t,n,r=!1,o=er(2),i=er(1),s={},c=function(){},l=new eo,f=function(e,t,n,r){void 0===n&&(n=V(h())),void 0===r&&(r=ei()),l.add(function(){return f(e,t,n,r)})},d=function(){},g=new ti(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return f.apply(void 0,e)});function h(){return{view:{referrer:document.referrer,url:window.location.href},context:o.getContext(),user:i.getContext()}}return t={logger:g,init:T(function(t){if(!t)return void x.error("Missing configuration");if(d=function(){return V(t)},el()&&(t=B({},t,{clientToken:"empty"})),n=t,!r||(n.silentMultipleInit||x.error("DD_LOGS is already initialized."),0)){var n,s,p=function(e){var t=function(e){if(!e||!e.clientToken)return void x.error("Client Token is not configured, we will not send any data.");var t,n,r,o,i,s,c,l,f,d,g,h,p,v,b,m,y,w,C=null!=(m=e.sessionSampleRate)?m:e.sampleRate;if(void 0!==C&&!eb(C))return void x.error("Session Sample Rate should be a number between 0 and 100");if(void 0!==e.telemetrySampleRate&&!eb(e.telemetrySampleRate))return void x.error("Telemetry Sample Rate should be a number between 0 and 100");if(void 0!==e.telemetryConfigurationSampleRate&&!eb(e.telemetryConfigurationSampleRate))return void x.error("Telemetry Configuration Sample Rate should be a number between 0 and 100");return Array.isArray(e.enableExperimentalFeatures)&&e.enableExperimentalFeatures.filter(function(e){var t;return Object.keys(t=a).some(function(n){return t[n]===e})}).forEach(function(e){ep.add(e)}),B({beforeSend:e.beforeSend&&L(e.beforeSend,"beforeSend threw an error:"),sessionStoreStrategyType:(t=e,(i=!function(e){if(void 0===document.cookie||null===document.cookie)return!1;try{var t="dd_cookie_test_".concat(ey()),n="test";eL(t,n,6e4,e);var r=eC(t)===n;return eS(t,e),r}catch(e){return x.error(e),!1}}(((r={}).secure=!!(n=t).useSecureSessionCookie||!!n.useCrossSiteSessionCookie,r.crossSite=!!n.useCrossSiteSessionCookie,n.trackSessionAcrossSubdomains&&(r.domain=function(){if(void 0===u){for(var e="dd_site_test_".concat(ey()),t=window.location.hostname.split("."),n=t.pop();t.length&&!eC(e);)eL(e,"test",1e3,{domain:n="".concat(t.pop(),".").concat(n)});eS(e,{domain:n}),u=n}return u}()),o=r))?void 0:{type:"Cookie",cookieOptions:o})||!t.allowFallbackToLocalStorage||(i=function(){try{var e=ey(),t="".concat("_dd_test_").concat(e);localStorage.setItem(t,e);var n=localStorage.getItem(t);return localStorage.removeItem(t),e===n?{type:"LocalStorage"}:void 0}catch(e){return}}()),i),sessionSampleRate:null!=C?C:100,telemetrySampleRate:null!=(y=e.telemetrySampleRate)?y:20,telemetryConfigurationSampleRate:null!=(w=e.telemetryConfigurationSampleRate)?w:5,service:e.service,silentMultipleInit:!!e.silentMultipleInit,batchBytesLimit:16384,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:3e4,batchMessagesLimit:50,messageBytesLimit:262144},(l=e.env,f=e.service,d=e.version,g=e.datacenter,h=[],l&&h.push(ez("env",l)),f&&h.push(ez("service",f)),d&&h.push(ez("version",d)),g&&h.push(ez("datacenter",g)),p=h,b=P(v={logsEndpointBuilder:eG(s=e,"logs",c=p),rumEndpointBuilder:eG(s,"rum",c),sessionReplayEndpointBuilder:eG(s,"sessionReplay",c)}).map(function(e){return e.urlPrefix}),B({isIntakeUrl:function(e){return b.some(function(t){return 0===e.indexOf(t)})},replica:function(e,t,n){if(e.replica){var r=B({},e,{site:eN,clientToken:e.replica.clientToken}),o={logsEndpointBuilder:eG(r,"logs",n),rumEndpointBuilder:eG(r,"rum",n)};return t.push.apply(t,P(o).map(function(e){return e.urlPrefix})),B({applicationId:e.replica.applicationId},o)}}(e,b,p),site:e.site||eN},v)))}(e),n=e7(e.forwardConsoleLogs,P(b),"Forward Console Logs"),r=e7(e.forwardReports,P(e8),"Forward Reports");if(t&&n&&r)return e.forwardErrorsToLogs&&!M(n,b.error)&&n.push(b.error),B({forwardErrorsToLogs:!1!==e.forwardErrorsToLogs,forwardConsoleLogs:n,forwardReports:r,requestErrorResponseLengthLimit:32768},t)}(t);if(p){if(t.storeContextsAcrossPages){var v=o.getContext();(o=eg(p,ta,2)).setContext(W(o.getContext(),v));var m=i.getContext();(i=eg(p,ta,1)).setContext(W(i.getContext(),m))}f=(s=e(t,p,h,g)).handleLog,c=s.getInternalContext,l.drain(),r=!0}}}),getLoggerGlobalContext:T(function(){return o.get()}),getGlobalContext:T(function(){return o.getContext()}),setLoggerGlobalContext:T(function(e){return o.set(e)}),setGlobalContext:T(function(e){return o.setContext(e)}),addLoggerGlobalContext:T(function(e,t){return o.add(e,t)}),setGlobalContextProperty:T(function(e,t){return o.setContextProperty(e,t)}),removeLoggerGlobalContext:T(function(e){return o.remove(e)}),removeGlobalContextProperty:T(function(e){return o.removeContextProperty(e)}),clearGlobalContext:T(function(){return o.clearContext()}),createLogger:T(function(e,t){return void 0===t&&(t={}),s[e]=new ti(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return f.apply(void 0,e)},Z(e),t.handler,t.level,Z(t.context)),s[e]}),getLogger:T(function(e){return s[e]}),getInitConfiguration:T(function(){return d()}),getInternalContext:T(function(e){return c(e)}),setUser:T(function(e){var t;(t="object"===z(e))||x.error("Unsupported user:",e),t&&i.setContext(eh(e))}),getUser:T(function(){return i.getContext()}),setUserProperty:T(function(e,t){var n,r=eh(((n={})[e]=t,n))[e];i.setContextProperty(e,r)}),removeUserProperty:T(function(e){return i.removeContextProperty(e)}),clearUser:T(function(){return i.clearContext()})},Object.defineProperty(n=B({version:"4.50.1",onReady:function(e){e()}},t),"_setDebug",{get:function(){return E},enumerable:!1}),n}(function(e,t,n,o){var i,u,c,l,d,g=new tV,h=[];g.subscribe(1,function(e){return ts("logs",e)});var w=function(e){g.notify(0,{rawLogsEvent:{message:e.message,date:e.startClocks.timeStamp,error:{origin:te.AGENT},origin:te.AGENT,status:tn.error}}),td("Error reported to customer",{"error.message":e.message})},x=N=new ee(function(){var e,n=(e=a.PAGEHIDE,ep.has(e)),r=ef(t,window,["visibilitychange","freeze","pagehide"],function(e){"pagehide"===e.type&&n?N.notify({reason:tp.PAGEHIDE}):"visibilitychange"===e.type&&"hidden"===document.visibilityState?N.notify({reason:tp.HIDDEN}):"freeze"===e.type&&N.notify({reason:tp.FROZEN})},{capture:!0}).stop,o=H;return n||(o=ef(t,window,["beforeunload"],function(){N.notify({reason:tp.UNLOADING})},void 0).stop),function(){r(),o()}}),L=!t.sessionStoreStrategyType||el()||tv()?(z="1"===tk(t)?{}:void 0,{findTrackedSession:function(){return z},expireObservable:new ee}):{findTrackedSession:function(e){var t=J.findActiveSession(e);return t&&"1"===t.trackingType?{id:t.id}:void 0},expireObservable:(J=function(e,t,n){var r,o,i,a,u,c,l=function(e,t,n){var r,o=new ee,i=new ee,a="Cookie"===e.type?function(e){var t,n,r={isLockEnabled:null!=s?s:s=!!window.chrome||/HeadlessChrome/.test(window.navigator.userAgent),persistSession:(t=e,function(e){eL(eE,eO(e),ex,t)}),retrieveSession:eM,clearSession:(n=e,function(){eS(eE,n)})};if(!eC(eE)){var o=eC("_dd"),i=eC("_dd_r"),a=eC("_dd_l"),u={};o&&(u.id=o),a&&/^[01]$/.test(a)&&(u.logs=a),i&&/^[012]$/.test(i)&&(u.rum=i),em(u)||(eT(u),r.persistSession(u))}return r}(e.cookieOptions):{isLockEnabled:!1,persistSession:eR,retrieveSession:eP,clearSession:eA},u=a.clearSession,c=a.retrieveSession,l=U(function(){eD({process:function(e){return h(e)?void 0:{}},after:d},a)},1e3),f=h(r=c())?r:{};function d(e){var n;return h(e)||(e={}),g()&&((n=e,f.id!==n.id||f[t]!==n[t])?(f={},i.notify()):f=e),e}function g(){return void 0!==f[t]}function h(e){return(void 0===e.created||ei()-Number(e.created)<ew)&&(void 0===e.expire||ei()<Number(e.expire))}return{expandOrRenewSession:G(function(){var e;eD({process:function(r){var o,i,a,s,u=d(r);return a=(i=n((o=u)[t])).trackingType,s=i.isTracked,o[t]=a,s&&!o.id&&(o.id=ey(),o.created=String(ei())),e=s,u},after:function(t){e&&!g()&&(f=t,o.notify()),f=t}},a)},1e3).throttled,expandSession:function(){eD({process:function(e){return g()?d(e):void 0}},a)},getSession:function(){return f},renewObservable:o,expireObservable:i,expire:function(){u(),d({})},stop:function(){q(l)}}}(e.sessionStoreStrategyType,t,n);tO.push(function(){return l.stop()});var f=new tT(ew);function d(){return{id:l.getSession().id,trackingType:l.getSession()[t]}}return tO.push(function(){return f.stop()}),l.renewObservable.subscribe(function(){f.add(d(),ea())}),l.expireObservable.subscribe(function(){f.closeActive(ea())}),l.expandOrRenewSession(),f.add(d(),{relative:0,timeStamp:eu()}.relative),r=ef(e,window,["click","touchstart","keydown","scroll"],function(){return l.expandOrRenewSession()},{capture:!0,passive:!0}).stop,tO.push(r),o=e,i=function(){return l.expandSession()},a=function(){"visible"===document.visibilityState&&i()},u=ef(o,document,["visibilitychange"],a,void 0).stop,tO.push(u),c=U(a,6e4),tO.push(function(){q(c)}),{findActiveSession:function(e){return f.find(e)},renewObservable:l.renewObservable,expireObservable:l.expireObservable,expire:l.expire}}(t,"logs",function(e){var n,r,o,i;return n=t,{trackingType:i="0"===(o=r=e)||"1"===o?r:tk(n),isTracked:"1"===i}})).expireObservable},C=function(e,t,n,o){var i,a,s,u,c,l=(i="browser-logs-sdk",a=e,u=new ee,tf.telemetryEnabled=!M(tl,a.site)&&ev(a.telemetrySampleRate),tf.telemetryConfigurationEnabled=tf.telemetryEnabled&&ev(a.telemetryConfigurationSampleRate),c={is_local_file:"file:"===window.location.protocol,is_worker:"WorkerGlobalScope"in self},f=function(e){if(tf.telemetryEnabled){var t,n,r,o=(t=i,n=e,r=c,W({type:"telemetry",date:ei(),service:t,version:"4.50.1",source:"browser",_dd:{format_version:2},telemetry:W(n,{runtime_env:r}),experimental_features:R(ep)},void 0!==s?s():{}));u.notify(o),ts("telemetry",o)}},r=tg,B(tf,{maxEventsPerPage:a.maxTelemetryEventsPerPage,sentEventCount:0}),{setContextProvider:function(e){s=e},observable:u,enabled:tf.telemetryEnabled}),d=[];if(el()){var g=ec(),h=l.observable.subscribe(function(e){return g.send("internal_telemetry",e)});d.push(function(){return h.unsubscribe()})}else{var p=tE(e,{endpoint:e.rumEndpointBuilder},e.replica&&{endpoint:e.replica.rumEndpointBuilder},t,n,o);d.push(function(){return p.stop()});var v=l.observable.subscribe(function(t){return p.add(t,"datad0g.com"===e.site)});d.push(function(){return v.unsubscribe()})}return{telemetry:l,stop:function(){d.forEach(function(e){return e()})}}}(t,w,x,L.expireObservable),S=C.telemetry,E=C.stop;h.push(function(){return E()}),S.setContextProvider(function(){var e,t,n,r,o,i;return{application:{id:null==(e=tA())?void 0:e.application_id},session:{id:null==(t=L.findTrackedSession())?void 0:t.id},view:{id:null==(r=null==(n=tA())?void 0:n.view)?void 0:r.id},action:{id:null==(i=null==(o=tA())?void 0:o.user_action)?void 0:i.id}}}),function(e,t){var n,r,o;if(e.forwardErrorsToLogs)(!p&&(n=e,p=r=new ee(function(){var e=tF(XMLHttpRequest.prototype,"open",{before:tN}).stop,t=tF(XMLHttpRequest.prototype,"send",{before:function(){tU.call(this,n,r)}}).stop,o=tF(XMLHttpRequest.prototype,"abort",{before:tq}).stop;return function(){e(),t(),o()}})),p).subscribe(function(e){"complete"===e.state&&i("xhr",e)}),(!v&&(v=o=new ee(function(){if(window.fetch)return tI(window,"fetch",function(e){return function(t,n){var r,i=O(tG,null,[o,t,n]);return i?O(tH,null,[o,r=e.call(this,i.input,i.init),i]):r=e.call(this,t,n),r}}).stop})),v).subscribe(function(e){"resolve"===e.state&&i("fetch",e)});function i(n,r){var o,i,a,s,u,c,l,f,d,g,h,p;function v(e){t.notify(0,{rawLogsEvent:{message:"".concat("xhr"===n?"XHR":"Fetch"," error ").concat(r.method," ").concat(r.url),date:r.startClocks.timeStamp,error:{origin:te.NETWORK,stack:e||"Failed to load"},http:{method:r.method,status_code:r.status,url:r.url},status:tn.error,origin:te.NETWORK}})}!e.isIntakeUrl(r.url)&&(0===(o=r).status&&"opaque"!==o.responseType||r.status>=500)&&("xhr"in r?(i=r.xhr,a=e,v("string"==typeof i.response?tz(i.response,a):i.response)):r.response?(s=r.response,u=e,c=v,(l=function(e){try{return e.clone()}catch(e){return}}(s))&&l.body?window.TextDecoder?(f=l.body,d=u.requestErrorResponseLengthLimit,g=function(e,t){e?c("Unable to retrieve response: ".concat(e)):c(t)},function(e,t,n){var r=e.getReader(),o=[],i=0;function a(){if(r.cancel().catch(H),n.collectStreamBody){if(1===o.length)s=o[0];else{var e,a,s=new Uint8Array(i),u=0;o.forEach(function(e){s.set(e,u),u+=e.length})}e=s.slice(0,n.bytesLimit),a=s.length>n.bytesLimit}t(void 0,e,a)}!function e(){r.read().then(T(function(t){if(t.done)return void a();n.collectStreamBody&&o.push(t.value),(i+=t.value.length)>n.bytesLimit?a():e()}),T(function(e){return t(e)}))}()}(f,function(e,t,n){if(e)g(e);else{var r=new TextDecoder().decode(t);n&&(r+="..."),g(void 0,r)}},{bytesLimit:d,collectStreamBody:!0})):l.text().then(T(function(e){return c(tz(e,u))}),T(function(e){return c("Unable to retrieve response: ".concat(e))})):c()):r.error&&(h=r.error,p=e,v(tz(e5(eJ(h)),p))))}}(t,g),function(e,t){if(e.forwardErrorsToLogs){var n,r,o,i,a,s=new ee;(i=(n=o=function(e,t){s.notify(e3({stackTrace:e,originalError:t,startClocks:es(),nonErrorPrefix:"Uncaught",source:te.SOURCE,handling:"unhandled"}))},tF(window,"onerror",{before:function(e,t,r,o,i){var a;if(i instanceof Error)a=eJ(i);else{var s,u,c,l,f=(s=e,"[object String]"===({}).toString.call(s)&&(c=(u=tJ.exec(s))[1],l=u[2]),{name:c,message:l});a={name:f.name,message:f.message,stack:[{url:t,column:o,line:r}]}}n(a,null!=i?i:e)}})).stop,a=(r=o,tF(window,"onunhandledrejection",{before:function(e){var t=e.reason||"Empty reason";r(eJ(t),t)}})).stop,{stop:function(){i(),a()}}).stop,s.subscribe(function(e){t.notify(0,{rawLogsEvent:{message:e.message,date:e.startClocks.timeStamp,error:{kind:e.type,origin:te.SOURCE,stack:e.stack},origin:te.SOURCE,status:tn.error}})})}}(t,g),k=t,P=g,(A=k.forwardConsoleLogs.map(function(e){var t,n;return tB[e]||(tB[e]=(t=e,n=new ee(function(){var e=m[t];return m[t]=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];e.apply(console,r);var i=function(){var e,t=Error();if(!t.stack)try{throw t}catch(e){}return O(function(){var n=eJ(t);n.stack=n.stack.slice(2),e=e5(n)}),e}();O(function(){n.notify(function(e,t,n){var r,o,i=e.map(function(e){var t;return"string"==typeof(t=e)?Z(t):t instanceof Error?e6(eJ(t)):X(Z(t),void 0,2)}).join(" ");if(t===b.error){var a=function(e,t){for(var n=0;n<e.length;n+=1){var r=e[n];if(t(r,n))return r}}(e,function(e){return e instanceof Error});r=a?e5(eJ(a)):void 0,o=e4(a),i="console error: ".concat(i)}return{api:t,message:i,stack:r,handlingStack:n,fingerprint:o}}(r,t,i))})},function(){m[t]=e}}))),tB[e]}),et.apply(void 0,A)).subscribe(function(e){P.notify(0,{rawLogsEvent:{date:ei(),message:e.message,origin:te.CONSOLE,error:e.api===b.error?{origin:te.CONSOLE,stack:e.stack,fingerprint:e.fingerprint}:void 0,status:tD[e.api]}})}),(V=t.forwardReports,K=[],M(V,e8.cspViolation)&&K.push((D=t,j=new ee(function(){return ef(D,document,["securitypolicyviolation"],function(e){j.notify(function(e){var t,n,r,o=e8.cspViolation,i="'".concat(e.blockedURI,"' blocked by '").concat(e.effectiveDirective,"' directive");return{type:e8.cspViolation,subtype:e.effectiveDirective,message:"".concat(o,": ").concat(i),stack:e9(e.effectiveDirective,e.originalPolicy?"".concat(i,' of the policy "').concat((t=e.originalPolicy,r=(n=t.charCodeAt(99))>=55296&&n<=56319?101:100,t.length<=r?t:"".concat(t.slice(0,r)).concat("...")),'"'):"no policy",e.sourceFile,e.lineNumber,e.columnNumber)}}(e))},void 0).stop}))),(Y=V.filter(function(e){return e!==e8.cspViolation})).length&&K.push((I=Y,F=new ee(function(){if(window.ReportingObserver){var e=T(function(e,t){return e.forEach(function(e){var t,n,r;F.notify((n=(t=e).type,{type:n,subtype:(r=t.body).id,message:"".concat(n,": ").concat(r.message),stack:e9(r.id,r.message,r.sourceFile,r.lineNumber,r.columnNumber)}))})}),t=new window.ReportingObserver(e,{types:I,buffered:!0});return t.observe(),function(){t.disconnect()}}}))),et.apply(void 0,K)).subscribe(function(e){var t,n,r,o=e.message,i=tj[e.type];i===tn.error?r={kind:e.subtype,origin:te.REPORT,stack:e.stack}:e.stack&&(o+=" Found in ".concat((t=e.stack,null==(n=/@ (.+)/.exec(t))?void 0:n[1]))),g.notify(0,{rawLogsEvent:{date:ei(),message:o,origin:te.REPORT,error:r,status:i}})});var _={handleLog:function(e,t,n,r){var o,i,a=e.context;tR(e.status,tr.console,t)&&(o=e,i=W(t.getContext(),a),y[o.status].call(m,o.message,i)),g.notify(0,{rawLogsEvent:{date:r||ei(),message:e.message,status:e.status,origin:te.LOGGER},messageContext:a,savedCommonContext:n,logger:t})}}.handleLog;if(Q=to.concat(["custom"]),en={},Q.forEach(function(e){var n,r,o;en[e]=(n=t.eventRateLimiterThreshold,r=0,o=!1,{isLimitReached:function(){if(0===r&&$(function(){r=0},6e4),(r+=1)<=n||o)return o=!1,!1;if(r===n+1){o=!0;try{w({message:"Reached max number of ".concat(e,"s by minute: ").concat(n),source:te.AGENT,startClocks:es()})}finally{o=!1}}return!0}})}),g.subscribe(0,function(e){var r,i,a,s=e.rawLogsEvent,u=e.messageContext,c=e.savedCommonContext,l=e.logger,f=void 0===l?o:l,d=s.date-eu(),h=L.findTrackedSession(d);if(h){var p=(void 0===c?void 0:c)||n(),v=W({service:t.service,session_id:h.id,usr:em(p.user)?void 0:p.user,view:p.view},p.context,tA(d),s,f.getContext(),void 0===u?void 0:u);!tR(s.status,tr.http,f)||(null==(r=t.beforeSend)?void 0:r.call(t,v))===!1||(null==(i=v.error)?void 0:i.origin)!==te.AGENT&&(null!=(a=en[v.status])?a:en.custom).isLimitReached()||g.notify(1,v)}}),el())er=ec(),g.subscribe(1,function(e){er.send("log",e)});else{var k,P,A,D,j,I,F,N,z,J,V,K,Y,Q,en,er,eo,ed,eg=(eo=L.expireObservable,ed=tE(t,{endpoint:t.logsEndpointBuilder},t.replica&&{endpoint:t.replica.logsEndpointBuilder},w,x,eo),g.subscribe(1,function(e){ed.add(e)}),ed).stop;h.push(function(){return eg()})}return c=null!=(i=e.proxy)?i:e.proxyUrl,l={session_sample_rate:null!=(u=e.sessionSampleRate)?u:e.sampleRate,telemetry_sample_rate:e.telemetrySampleRate,telemetry_configuration_sample_rate:e.telemetryConfigurationSampleRate,use_before_send:!!e.beforeSend,use_cross_site_session_cookie:e.useCrossSiteSessionCookie,use_secure_session_cookie:e.useSecureSessionCookie,use_proxy:void 0!==c?!!c:void 0,silent_multiple_init:e.silentMultipleInit,track_session_across_subdomains:e.trackSessionAcrossSubdomains,track_resources:e.trackResources,track_long_task:e.trackLongTasks,allow_fallback_to_local_storage:!!e.allowFallbackToLocalStorage,store_contexts_across_pages:!!e.storeContextsAcrossPages},d=B({forward_errors_to_logs:e.forwardErrorsToLogs,forward_console_logs:e.forwardConsoleLogs,forward_reports:e.forwardReports},l),tf.telemetryConfigurationEnabled&&th({type:tu.configuration,configuration:d}),{handleLog:_,getInternalContext:({get:function(e){var t=L.findTrackedSession(e);if(t)return{session_id:t.id}}}).get,stop:function(){h.forEach(function(e){return e()})}}});!function(e,t,n){var r=e[t];e[t]=n,r&&r.q&&r.q.forEach(function(e){return L(e,"onReady callback threw an error:")()})}(D(),"DD_LOGS",tW)},96363:(e,t,n)=>{n.d(t,{b6:()=>f,oG:()=>l});var r=n(52430),o=(e=>(e.onBeforeDataOut="onBeforeDataOut",e.shouldSendToLogger="shouldSendToLogger",e.onMetadataCalled="onMetadataCalled",e.onBeforeMessageOut="onBeforeMessageOut",e.onContextCalled="onContextCalled",e))(o||{}),i=class e{context={};hasContext=!1;setContext(e){if(!e){this.context={},this.hasContext=!1;return}this.context=e,this.hasContext=!0}appendContext(e){this.context={...this.context,...e},this.hasContext=!0}getContext(){return this.context}hasContextData(){return this.hasContext}onChildLoggerCreated({parentContextManager:e,childContextManager:t}){if(e.hasContextData()){let n=e.getContext();t.setContext({...n})}}clone(){let t=new e;return t.setContext({...this.context}),t.hasContext=this.hasContext,t}},a=n(22660),s=class{err;metadata;structuredLogger;hasMetadata;pluginManager;constructor(e){this.err=null,this.metadata={},this.structuredLogger=e,this.hasMetadata=!1,this.pluginManager=e.pluginManager}withMetadata(e){let{pluginManager:t,structuredLogger:{_config:{consoleDebug:n}}}=this;if(!e)return n&&console.debug("[LogLayer] withMetadata was called with no metadata; dropping."),this;let r=e;return!t.hasPlugins(o.onMetadataCalled)||(r=t.runOnMetadataCalled(e,this.structuredLogger))?(this.metadata={...this.metadata,...r},this.hasMetadata=!0,this):(n&&console.debug("[LogLayer] Metadata was dropped due to plugin returning falsy value."),this)}withError(e){return this.err=e,this}info(...e){this.structuredLogger.isLevelEnabled(r.$b.info)&&(this.structuredLogger._formatMessage(e),this.formatLog(r.$b.info,e))}warn(...e){this.structuredLogger.isLevelEnabled(r.$b.warn)&&(this.structuredLogger._formatMessage(e),this.formatLog(r.$b.warn,e))}error(...e){this.structuredLogger.isLevelEnabled(r.$b.error)&&(this.structuredLogger._formatMessage(e),this.formatLog(r.$b.error,e))}debug(...e){this.structuredLogger.isLevelEnabled(r.$b.debug)&&(this.structuredLogger._formatMessage(e),this.formatLog(r.$b.debug,e))}trace(...e){this.structuredLogger.isLevelEnabled(r.$b.trace)&&(this.structuredLogger._formatMessage(e),this.formatLog(r.$b.trace,e))}fatal(...e){this.structuredLogger.isLevelEnabled(r.$b.fatal)&&(this.structuredLogger._formatMessage(e),this.formatLog(r.$b.fatal,e))}disableLogging(){return this.structuredLogger.disableLogging(),this}enableLogging(){return this.structuredLogger.enableLogging(),this}formatLog(e,t){let{muteMetadata:n}=this.structuredLogger._config,r=!n&&this.hasMetadata;this.structuredLogger._formatLog({logLevel:e,params:t,metadata:r?this.metadata:null,err:this.err})}},u=[o.onBeforeDataOut,o.onMetadataCalled,o.shouldSendToLogger,o.onBeforeMessageOut,o.onContextCalled],c=class{idToPlugin;onBeforeDataOut=[];shouldSendToLogger=[];onMetadataCalled=[];onBeforeMessageOut=[];onContextCalled=[];constructor(e){this.idToPlugin={},this.mapPlugins(e),this.indexPlugins()}mapPlugins(e){for(let t of e){if(t.id||(t.id=Date.now().toString()+Math.random().toString()),this.idToPlugin[t.id])throw Error(`[LogLayer] Plugin with id ${t.id} already exists.`);t.registeredAt=Date.now(),this.idToPlugin[t.id]=t}}indexPlugins(){for(let e of(this.onBeforeDataOut=[],this.shouldSendToLogger=[],this.onMetadataCalled=[],this.onBeforeMessageOut=[],this.onContextCalled=[],Object.values(this.idToPlugin).sort((e,t)=>e.registeredAt-t.registeredAt))){if(e.disabled)return;for(let t of u)e[t]&&e.id&&this[t].push(e.id)}}hasPlugins(e){return this[e].length>0}countPlugins(e){return e?this[e].length:Object.keys(this.idToPlugin).length}addPlugins(e){this.mapPlugins(e),this.indexPlugins()}enablePlugin(e){let t=this.idToPlugin[e];t&&(t.disabled=!1),this.indexPlugins()}disablePlugin(e){let t=this.idToPlugin[e];t&&(t.disabled=!0),this.indexPlugins()}removePlugin(e){delete this.idToPlugin[e],this.indexPlugins()}runOnBeforeDataOut(e,t){let n={...e};for(let e of this.onBeforeDataOut){let r=this.idToPlugin[e];if(r.onBeforeDataOut){let e=r.onBeforeDataOut({data:n.data,logLevel:n.logLevel},t);e&&(n.data||(n.data={}),Object.assign(n.data,e))}}return n.data}runShouldSendToLogger(e,t){return!this.shouldSendToLogger.some(n=>{let r=this.idToPlugin[n];return!r.shouldSendToLogger?.(e,t)})}runOnMetadataCalled(e,t){let n={...e};for(let e of this.onMetadataCalled){let r=this.idToPlugin[e],o=r.onMetadataCalled?.(n,t);if(!o)return null;n=o}return n}runOnBeforeMessageOut(e,t){let n=[...e.messages];for(let r of this.onBeforeMessageOut){let o=this.idToPlugin[r],i=o.onBeforeMessageOut?.({messages:n,logLevel:e.logLevel},t);i&&(n=i)}return n}runOnContextCalled(e,t){let n={...e};for(let e of this.onContextCalled){let r=this.idToPlugin[e],o=r.onContextCalled?.(n,t);if(!o)return null;n=o}return n}},l=class e{pluginManager;idToTransport;hasMultipleTransports;singleTransport;contextManager;logLevelEnabledStatus={info:!0,warn:!0,error:!0,debug:!0,trace:!0,fatal:!0};_config;constructor(e){this._config={...e,enabled:e.enabled??!0},this._config.enabled||this.disableLogging(),this.contextManager=new i,this.pluginManager=new c(e.plugins||[]),this._config.errorFieldName||(this._config.errorFieldName="err"),this._config.copyMsgOnOnlyError||(this._config.copyMsgOnOnlyError=!1),this._initializeTransports(this._config.transport)}withContextManager(e){return this.contextManager&&"function"==typeof this.contextManager[Symbol.dispose]&&this.contextManager[Symbol.dispose](),this.contextManager=e,this}getContextManager(){return this.contextManager}_initializeTransports(e){if(this.idToTransport)for(let e in this.idToTransport)this.idToTransport[e]&&"function"==typeof this.idToTransport[e][Symbol.dispose]&&this.idToTransport[e][Symbol.dispose]();this.hasMultipleTransports=Array.isArray(e)&&e.length>1,this.singleTransport=this.hasMultipleTransports?null:Array.isArray(e)?e[0]:e,Array.isArray(e)?this.idToTransport=e.reduce((e,t)=>(e[t.id]=t,e),{}):this.idToTransport={[e.id]:e}}withPrefix(e){let t=this.child();return t._config.prefix=e,t}withContext(e){let t=e;return e?!this.pluginManager.hasPlugins(o.onContextCalled)||(t=this.pluginManager.runOnContextCalled(e,this))?(this.contextManager.appendContext(t),this):(this._config.consoleDebug&&console.debug("[LogLayer] Context was dropped due to plugin returning falsy value."),this):(this._config.consoleDebug&&console.debug("[LogLayer] withContext was called with no context; dropping."),this)}clearContext(){return this.contextManager.setContext(void 0),this}getContext(){return this.contextManager.getContext()}addPlugins(e){this.pluginManager.addPlugins(e)}enablePlugin(e){this.pluginManager.enablePlugin(e)}disablePlugin(e){this.pluginManager.disablePlugin(e)}removePlugin(e){this.pluginManager.removePlugin(e)}withMetadata(e){return new s(this).withMetadata(e)}withError(e){return new s(this).withError(e)}child(){let t=new e({...this._config,transport:Array.isArray(this._config.transport)?[...this._config.transport]:this._config.transport}).withPluginManager(this.pluginManager).withContextManager(this.contextManager.clone());return this.contextManager.onChildLoggerCreated({parentContextManager:this.contextManager,childContextManager:t.contextManager,parentLogger:this,childLogger:t}),t}withFreshTransports(e){return this._config.transport=e,this._initializeTransports(e),this}withFreshPlugins(e){return this._config.plugins=e,this.pluginManager=new c(e),this}withPluginManager(e){return this.pluginManager=e,this}errorOnly(e,t){let n=t?.logLevel||r.$b.error;if(!this.isLevelEnabled(n))return;let{copyMsgOnOnlyError:o}=this._config,i={logLevel:n,err:e};(o&&t?.copyMsg!==!1||t?.copyMsg===!0)&&e?.message&&(i.params=[e.message]),this._formatLog(i)}metadataOnly(e,t=r.$b.info){if(!this.isLevelEnabled(t))return;let{muteMetadata:n,consoleDebug:i}=this._config;if(n)return;if(!e){i&&console.debug("[LogLayer] metadataOnly was called with no metadata; dropping.");return}let a=e;if(this.pluginManager.hasPlugins(o.onMetadataCalled)&&!(a=this.pluginManager.runOnMetadataCalled(e,this))){i&&console.debug("[LogLayer] Metadata was dropped due to plugin returning falsy value.");return}let s={logLevel:t,metadata:a};this._formatLog(s)}info(...e){this.isLevelEnabled(r.$b.info)&&(this._formatMessage(e),this._formatLog({logLevel:r.$b.info,params:e}))}warn(...e){this.isLevelEnabled(r.$b.warn)&&(this._formatMessage(e),this._formatLog({logLevel:r.$b.warn,params:e}))}error(...e){this.isLevelEnabled(r.$b.error)&&(this._formatMessage(e),this._formatLog({logLevel:r.$b.error,params:e}))}debug(...e){this.isLevelEnabled(r.$b.debug)&&(this._formatMessage(e),this._formatLog({logLevel:r.$b.debug,params:e}))}trace(...e){this.isLevelEnabled(r.$b.trace)&&(this._formatMessage(e),this._formatLog({logLevel:r.$b.trace,params:e}))}fatal(...e){this.isLevelEnabled(r.$b.fatal)&&(this._formatMessage(e),this._formatLog({logLevel:r.$b.fatal,params:e}))}disableLogging(){for(let e of Object.keys(this.logLevelEnabledStatus))this.logLevelEnabledStatus[e]=!1;return this}enableLogging(){for(let e of Object.keys(this.logLevelEnabledStatus))this.logLevelEnabledStatus[e]=!0;return this}muteContext(){return this._config.muteContext=!0,this}unMuteContext(){return this._config.muteContext=!1,this}muteMetadata(){return this._config.muteMetadata=!0,this}unMuteMetadata(){return this._config.muteMetadata=!1,this}enableIndividualLevel(e){return e in this.logLevelEnabledStatus&&(this.logLevelEnabledStatus[e]=!0),this}disableIndividualLevel(e){return e in this.logLevelEnabledStatus&&(this.logLevelEnabledStatus[e]=!1),this}setLevel(e){let t=r.rj[e];for(let e of Object.values(r.$b)){let n=r.rj[e];this.logLevelEnabledStatus[e]=n>=t}return this}isLevelEnabled(e){return this.logLevelEnabledStatus[e]}formatContext(){let{contextFieldName:e,muteContext:t}=this._config,n=this.contextManager.getContext();return this.contextManager.hasContextData()&&!t?e?{[e]:{...n}}:{...n}:{}}formatMetadata(e=null){let{metadataFieldName:t,muteMetadata:n}=this._config;return e&&!n?t?{[t]:{...e}}:{...e}:{}}getLoggerInstance(e){let t=this.idToTransport[e];if(t)return t.getLoggerInstance()}_formatMessage(e=[]){let{prefix:t}=this._config;t&&"string"==typeof e[0]&&(e[0]=`${t} ${e[0]}`)}_formatLog({logLevel:e,params:t=[],metadata:n=null,err:r}){let{errorSerializer:i,errorFieldInMetadata:a,muteContext:s,contextFieldName:u,metadataFieldName:c,errorFieldName:l}=this._config,f=!!n||!s&&this.contextManager.hasContextData(),d={};if(f)if(u&&u===c){let e=this.formatContext()[u],t=this.formatMetadata(n)[c];d={[u]:{...e,...t}}}else d={...this.formatContext(),...this.formatMetadata(n)};if(r){let e=i?i(r):r;a&&n?n[l]=e:d=a&&!n&&c?{...d,[c]:{[l]:e}}:{...d,[l]:e},f=!0}if(this.pluginManager.hasPlugins(o.onBeforeDataOut)&&(d=this.pluginManager.runOnBeforeDataOut({data:f?d:void 0,logLevel:e},this))&&!f&&(f=!0),this.pluginManager.hasPlugins(o.onBeforeMessageOut)&&(t=this.pluginManager.runOnBeforeMessageOut({messages:[...t],logLevel:e},this)),this.hasMultipleTransports)Promise.all(this._config.transport.filter(e=>e.enabled).map(async n=>{if(!this.pluginManager.hasPlugins(o.shouldSendToLogger)||this.pluginManager.runShouldSendToLogger({messages:[...t],data:f?d:void 0,logLevel:e,transportId:n.id},this))return n._sendToLogger({logLevel:e,messages:[...t],data:f?d:void 0,hasData:f})})).catch(e=>{this._config.consoleDebug&&console.error("[LogLayer] Error executing transports:",e)});else{if(!this.singleTransport?.enabled||this.pluginManager.hasPlugins(o.shouldSendToLogger)&&!this.pluginManager.runShouldSendToLogger({messages:[...t],data:f?d:void 0,logLevel:e,transportId:this.singleTransport.id},this))return;this.singleTransport._sendToLogger({logLevel:e,messages:[...t],data:f?d:void 0,hasData:f})}}};a.l6;var f=class extends a.jL{appendObjectData;logLevel;messageField;dateField;levelField;dateFn;levelFn;constructor(e){super(e),this.appendObjectData=e.appendObjectData||!1,this.logLevel=e.level??"trace",this.messageField=e.messageField,this.dateField=e.dateField,this.levelField=e.levelField,this.dateFn=e.dateFn,this.levelFn=e.levelFn}shipToLogger({logLevel:e,messages:t,data:n,hasData:o}){if(!(a.rj[e]<a.rj[this.logLevel])){if(this.messageField||this.dateField||this.levelField){let r=this.messageField?t.join(" "):void 0;t=[{...n||{},...this.messageField&&{[this.messageField]:r},...this.dateField&&{[this.dateField]:this.dateFn?this.dateFn():new Date().toISOString()},...this.levelField&&{[this.levelField]:this.levelFn?this.levelFn(e):e}}]}else n&&o&&(this.appendObjectData?t.push(n):t.unshift(n));switch(e){case r.$b.info:this.logger.info(...t);break;case r.$b.warn:this.logger.warn(...t);break;case r.$b.error:this.logger.error(...t);break;case r.$b.trace:this.logger.trace(...t);break;case r.$b.debug:this.logger.debug(...t);break;case r.$b.fatal:this.logger.error(...t)}return t}}}}}]);
//# sourceMappingURL=5445-4e228c581adcc8b3.js.map